<!DOCTYPE html>
<html>
<head>
  <title>jquery.sparkline.min.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "public\\modules\\jquery-sparkline\\jquery.sparkline.min.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>jquery.sparkline.min.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">document,Math,undefined</span>)</span>{(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">factory</span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> define===<span class="hljs-string">"function"</span>&amp;&amp;define.amd){define([<span class="hljs-string">"jquery"</span>],factory)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(jQuery&amp;&amp;!jQuery.fn.sparkline){factory(jQuery)}})(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$</span>)</span>{<span class="hljs-string">"use strict"</span>;<span class="hljs-keyword">var</span> UNSET_OPTION={},getDefaults,createClass,SPFormat,clipval,quartile,normalizeValue,normalizeValues,remove,isNumber,all,sum,addCSS,ensureArray,formatNumber,RangeMap,MouseHandler,Tooltip,barHighlightMixin,line,bar,tristate,discrete,bullet,pie,box,defaultStyles,initStyles,VShape,VCanvas_base,VCanvas_canvas,VCanvas_vml,pending,shapeCount=<span class="hljs-number">0</span>;getDefaults=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">common</span>:{<span class="hljs-attr">type</span>:<span class="hljs-string">"line"</span>,<span class="hljs-attr">lineColor</span>:<span class="hljs-string">"#00f"</span>,<span class="hljs-attr">fillColor</span>:<span class="hljs-string">"#cdf"</span>,<span class="hljs-attr">defaultPixelsPerValue</span>:<span class="hljs-number">3</span>,<span class="hljs-attr">width</span>:<span class="hljs-string">"auto"</span>,<span class="hljs-attr">height</span>:<span class="hljs-string">"auto"</span>,<span class="hljs-attr">composite</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">tagValuesAttribute</span>:<span class="hljs-string">"values"</span>,<span class="hljs-attr">tagOptionsPrefix</span>:<span class="hljs-string">"spark"</span>,<span class="hljs-attr">enableTagOptions</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">enableHighlight</span>:<span class="hljs-literal">true</span>,<span class="hljs-attr">highlightLighten</span>:<span class="hljs-number">1.4</span>,<span class="hljs-attr">tooltipSkipNull</span>:<span class="hljs-literal">true</span>,<span class="hljs-attr">tooltipPrefix</span>:<span class="hljs-string">""</span>,<span class="hljs-attr">tooltipSuffix</span>:<span class="hljs-string">""</span>,<span class="hljs-attr">disableHiddenCheck</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">numberFormatter</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">numberDigitGroupCount</span>:<span class="hljs-number">3</span>,<span class="hljs-attr">numberDigitGroupSep</span>:<span class="hljs-string">","</span>,<span class="hljs-attr">numberDecimalMark</span>:<span class="hljs-string">"."</span>,<span class="hljs-attr">disableTooltips</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">disableInteraction</span>:<span class="hljs-literal">false</span>},<span class="hljs-attr">line</span>:{<span class="hljs-attr">spotColor</span>:<span class="hljs-string">"#f80"</span>,<span class="hljs-attr">highlightSpotColor</span>:<span class="hljs-string">"#5f5"</span>,<span class="hljs-attr">highlightLineColor</span>:<span class="hljs-string">"#f22"</span>,<span class="hljs-attr">spotRadius</span>:<span class="hljs-number">1.5</span>,<span class="hljs-attr">minSpotColor</span>:<span class="hljs-string">"#f80"</span>,<span class="hljs-attr">maxSpotColor</span>:<span class="hljs-string">"#f80"</span>,<span class="hljs-attr">lineWidth</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">normalRangeMin</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">normalRangeMax</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">normalRangeColor</span>:<span class="hljs-string">"#ccc"</span>,<span class="hljs-attr">drawNormalOnTop</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">chartRangeMin</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">chartRangeMax</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">chartRangeMinX</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">chartRangeMaxX</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">tooltipFormat</span>:<span class="hljs-keyword">new</span> SPFormat(<span class="hljs-string">'&lt;span style="color: {{color}}"&gt;&amp;#9679;&lt;/span&gt; {{prefix}}{{y}}{{suffix}}'</span>)},<span class="hljs-attr">bar</span>:{<span class="hljs-attr">barColor</span>:<span class="hljs-string">"#3366cc"</span>,<span class="hljs-attr">negBarColor</span>:<span class="hljs-string">"#f44"</span>,<span class="hljs-attr">stackedBarColor</span>:[<span class="hljs-string">"#3366cc"</span>,<span class="hljs-string">"#dc3912"</span>,<span class="hljs-string">"#ff9900"</span>,<span class="hljs-string">"#109618"</span>,<span class="hljs-string">"#66aa00"</span>,<span class="hljs-string">"#dd4477"</span>,<span class="hljs-string">"#0099c6"</span>,<span class="hljs-string">"#990099"</span>],<span class="hljs-attr">zeroColor</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">nullColor</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">zeroAxis</span>:<span class="hljs-literal">true</span>,<span class="hljs-attr">barWidth</span>:<span class="hljs-number">4</span>,<span class="hljs-attr">barSpacing</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">chartRangeMax</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">chartRangeMin</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">chartRangeClip</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">colorMap</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">tooltipFormat</span>:<span class="hljs-keyword">new</span> SPFormat(<span class="hljs-string">'&lt;span style="color: {{color}}"&gt;&amp;#9679;&lt;/span&gt; {{prefix}}{{value}}{{suffix}}'</span>)},<span class="hljs-attr">tristate</span>:{<span class="hljs-attr">barWidth</span>:<span class="hljs-number">4</span>,<span class="hljs-attr">barSpacing</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">posBarColor</span>:<span class="hljs-string">"#6f6"</span>,<span class="hljs-attr">negBarColor</span>:<span class="hljs-string">"#f44"</span>,<span class="hljs-attr">zeroBarColor</span>:<span class="hljs-string">"#999"</span>,<span class="hljs-attr">colorMap</span>:{},<span class="hljs-attr">tooltipFormat</span>:<span class="hljs-keyword">new</span> SPFormat(<span class="hljs-string">'&lt;span style="color: {{color}}"&gt;&amp;#9679;&lt;/span&gt; {{value:map}}'</span>),<span class="hljs-attr">tooltipValueLookups</span>:{<span class="hljs-attr">map</span>:{<span class="hljs-string">"-1"</span>:<span class="hljs-string">"Loss"</span>,<span class="hljs-number">0</span>:<span class="hljs-string">"Draw"</span>,<span class="hljs-number">1</span>:<span class="hljs-string">"Win"</span>}}},<span class="hljs-attr">discrete</span>:{<span class="hljs-attr">lineHeight</span>:<span class="hljs-string">"auto"</span>,<span class="hljs-attr">thresholdColor</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">thresholdValue</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">chartRangeMax</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">chartRangeMin</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">chartRangeClip</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">tooltipFormat</span>:<span class="hljs-keyword">new</span> SPFormat(<span class="hljs-string">"{{prefix}}{{value}}{{suffix}}"</span>)},<span class="hljs-attr">bullet</span>:{<span class="hljs-attr">targetColor</span>:<span class="hljs-string">"#f33"</span>,<span class="hljs-attr">targetWidth</span>:<span class="hljs-number">3</span>,<span class="hljs-attr">performanceColor</span>:<span class="hljs-string">"#33f"</span>,<span class="hljs-attr">rangeColors</span>:[<span class="hljs-string">"#d3dafe"</span>,<span class="hljs-string">"#a8b6ff"</span>,<span class="hljs-string">"#7f94ff"</span>],<span class="hljs-attr">base</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">tooltipFormat</span>:<span class="hljs-keyword">new</span> SPFormat(<span class="hljs-string">"{{fieldkey:fields}} - {{value}}"</span>),<span class="hljs-attr">tooltipValueLookups</span>:{<span class="hljs-attr">fields</span>:{<span class="hljs-attr">r</span>:<span class="hljs-string">"Range"</span>,<span class="hljs-attr">p</span>:<span class="hljs-string">"Performance"</span>,<span class="hljs-attr">t</span>:<span class="hljs-string">"Target"</span>}}},<span class="hljs-attr">pie</span>:{<span class="hljs-attr">offset</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">sliceColors</span>:[<span class="hljs-string">"#3366cc"</span>,<span class="hljs-string">"#dc3912"</span>,<span class="hljs-string">"#ff9900"</span>,<span class="hljs-string">"#109618"</span>,<span class="hljs-string">"#66aa00"</span>,<span class="hljs-string">"#dd4477"</span>,<span class="hljs-string">"#0099c6"</span>,<span class="hljs-string">"#990099"</span>],<span class="hljs-attr">borderWidth</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">borderColor</span>:<span class="hljs-string">"#000"</span>,<span class="hljs-attr">tooltipFormat</span>:<span class="hljs-keyword">new</span> SPFormat(<span class="hljs-string">'&lt;span style="color: {{color}}"&gt;&amp;#9679;&lt;/span&gt; {{value}} ({{percent.1}}%)'</span>)},<span class="hljs-attr">box</span>:{<span class="hljs-attr">raw</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">boxLineColor</span>:<span class="hljs-string">"#000"</span>,<span class="hljs-attr">boxFillColor</span>:<span class="hljs-string">"#cdf"</span>,<span class="hljs-attr">whiskerColor</span>:<span class="hljs-string">"#000"</span>,<span class="hljs-attr">outlierLineColor</span>:<span class="hljs-string">"#333"</span>,<span class="hljs-attr">outlierFillColor</span>:<span class="hljs-string">"#fff"</span>,<span class="hljs-attr">medianColor</span>:<span class="hljs-string">"#f00"</span>,<span class="hljs-attr">showOutliers</span>:<span class="hljs-literal">true</span>,<span class="hljs-attr">outlierIQR</span>:<span class="hljs-number">1.5</span>,<span class="hljs-attr">spotRadius</span>:<span class="hljs-number">1.5</span>,<span class="hljs-attr">target</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">targetColor</span>:<span class="hljs-string">"#4a2"</span>,<span class="hljs-attr">chartRangeMax</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">chartRangeMin</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">tooltipFormat</span>:<span class="hljs-keyword">new</span> SPFormat(<span class="hljs-string">"{{field:fields}}: {{value}}"</span>),<span class="hljs-attr">tooltipFormatFieldlistKey</span>:<span class="hljs-string">"field"</span>,<span class="hljs-attr">tooltipValueLookups</span>:{<span class="hljs-attr">fields</span>:{<span class="hljs-attr">lq</span>:<span class="hljs-string">"Lower Quartile"</span>,<span class="hljs-attr">med</span>:<span class="hljs-string">"Median"</span>,<span class="hljs-attr">uq</span>:<span class="hljs-string">"Upper Quartile"</span>,<span class="hljs-attr">lo</span>:<span class="hljs-string">"Left Outlier"</span>,<span class="hljs-attr">ro</span>:<span class="hljs-string">"Right Outlier"</span>,<span class="hljs-attr">lw</span>:<span class="hljs-string">"Left Whisker"</span>,<span class="hljs-attr">rw</span>:<span class="hljs-string">"Right Whisker"</span>}}}}};defaultStyles=<span class="hljs-string">".jqstooltip { "</span>+<span class="hljs-string">"position: absolute;"</span>+<span class="hljs-string">"left: 0px;"</span>+<span class="hljs-string">"top: 0px;"</span>+<span class="hljs-string">"visibility: hidden;"</span>+<span class="hljs-string">"background: rgb(0, 0, 0) transparent;"</span>+<span class="hljs-string">"background-color: rgba(0,0,0,0.6);"</span>+<span class="hljs-string">"filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);"</span>+<span class="hljs-string">'-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";'</span>+<span class="hljs-string">"color: white;"</span>+<span class="hljs-string">"font: 10px arial, san serif;"</span>+<span class="hljs-string">"text-align: left;"</span>+<span class="hljs-string">"white-space: nowrap;"</span>+<span class="hljs-string">"padding: 5px;"</span>+<span class="hljs-string">"border: 1px solid white;"</span>+<span class="hljs-string">"box-sizing: content-box;"</span>+<span class="hljs-string">"z-index: 10000;"</span>+<span class="hljs-string">"}"</span>+<span class="hljs-string">".jqsfield { "</span>+<span class="hljs-string">"color: white;"</span>+<span class="hljs-string">"font: 10px arial, san serif;"</span>+<span class="hljs-string">"text-align: left;"</span>+<span class="hljs-string">"}"</span>;createClass=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> Class,args;Class=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.init.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)};<span class="hljs-keyword">if</span>(<span class="hljs-built_in">arguments</span>.length&gt;<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>]){Class.prototype=$.extend(<span class="hljs-keyword">new</span> <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>],<span class="hljs-built_in">arguments</span>[<span class="hljs-built_in">arguments</span>.length<span class="hljs-number">-1</span>]);Class._super=<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>].prototype}<span class="hljs-keyword">else</span>{Class.prototype=<span class="hljs-built_in">arguments</span>[<span class="hljs-built_in">arguments</span>.length<span class="hljs-number">-1</span>]}<span class="hljs-keyword">if</span>(<span class="hljs-built_in">arguments</span>.length&gt;<span class="hljs-number">2</span>){args=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>);args.unshift(Class.prototype);$.extend.apply($,args)}}<span class="hljs-keyword">else</span>{Class.prototype=<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>]}Class.prototype.cls=Class;<span class="hljs-keyword">return</span> Class};$.SPFormatClass=SPFormat=createClass({<span class="hljs-attr">fre</span>:<span class="hljs-regexp">/\{\{([\w.]+?)(:(.+?))?\}\}/g</span>,<span class="hljs-attr">precre</span>:<span class="hljs-regexp">/(\w+)\.(\d+)/</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">format,fclass</span>)</span>{<span class="hljs-keyword">this</span>.format=format;<span class="hljs-keyword">this</span>.fclass=fclass},<span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldset,lookups,options</span>)</span>{<span class="hljs-keyword">var</span> self=<span class="hljs-keyword">this</span>,fields=fieldset,match,token,lookupkey,fieldvalue,prec;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.format.replace(<span class="hljs-keyword">this</span>.fre,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> lookup;token=<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>];lookupkey=<span class="hljs-built_in">arguments</span>[<span class="hljs-number">3</span>];match=self.precre.exec(token);<span class="hljs-keyword">if</span>(match){prec=match[<span class="hljs-number">2</span>];token=match[<span class="hljs-number">1</span>]}<span class="hljs-keyword">else</span>{prec=<span class="hljs-literal">false</span>}fieldvalue=fields[token];<span class="hljs-keyword">if</span>(fieldvalue===<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">return</span><span class="hljs-string">""</span>}<span class="hljs-keyword">if</span>(lookupkey&amp;&amp;lookups&amp;&amp;lookups[lookupkey]){lookup=lookups[lookupkey];<span class="hljs-keyword">if</span>(lookup.get){<span class="hljs-keyword">return</span> lookups[lookupkey].get(fieldvalue)||fieldvalue}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">return</span> lookups[lookupkey][fieldvalue]||fieldvalue}}<span class="hljs-keyword">if</span>(isNumber(fieldvalue)){<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"numberFormatter"</span>)){fieldvalue=options.get(<span class="hljs-string">"numberFormatter"</span>)(fieldvalue)}<span class="hljs-keyword">else</span>{fieldvalue=formatNumber(fieldvalue,prec,options.get(<span class="hljs-string">"numberDigitGroupCount"</span>),options.get(<span class="hljs-string">"numberDigitGroupSep"</span>),options.get(<span class="hljs-string">"numberDecimalMark"</span>))}}<span class="hljs-keyword">return</span> fieldvalue})}});$.spformat=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">format,fclass</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SPFormat(format,fclass)};clipval=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val,min,max</span>)</span>{<span class="hljs-keyword">if</span>(val&lt;min){<span class="hljs-keyword">return</span> min}<span class="hljs-keyword">if</span>(val&gt;max){<span class="hljs-keyword">return</span> max}<span class="hljs-keyword">return</span> val};quartile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">values,q</span>)</span>{<span class="hljs-keyword">var</span> vl;<span class="hljs-keyword">if</span>(q===<span class="hljs-number">2</span>){vl=<span class="hljs-built_in">Math</span>.floor(values.length/<span class="hljs-number">2</span>);<span class="hljs-keyword">return</span> values.length%<span class="hljs-number">2</span>?values[vl]:(values[vl<span class="hljs-number">-1</span>]+values[vl])/<span class="hljs-number">2</span>}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(values.length%<span class="hljs-number">2</span>){vl=(values.length*q+q)/<span class="hljs-number">4</span>;<span class="hljs-keyword">return</span> vl%<span class="hljs-number">1</span>?(values[<span class="hljs-built_in">Math</span>.floor(vl)]+values[<span class="hljs-built_in">Math</span>.floor(vl)<span class="hljs-number">-1</span>])/<span class="hljs-number">2</span>:values[vl<span class="hljs-number">-1</span>]}<span class="hljs-keyword">else</span>{vl=(values.length*q+<span class="hljs-number">2</span>)/<span class="hljs-number">4</span>;<span class="hljs-keyword">return</span> vl%<span class="hljs-number">1</span>?(values[<span class="hljs-built_in">Math</span>.floor(vl)]+values[<span class="hljs-built_in">Math</span>.floor(vl)<span class="hljs-number">-1</span>])/<span class="hljs-number">2</span>:values[vl<span class="hljs-number">-1</span>]}}};normalizeValue=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>)</span>{<span class="hljs-keyword">var</span> nf;<span class="hljs-keyword">switch</span>(val){<span class="hljs-keyword">case</span><span class="hljs-string">"undefined"</span>:val=<span class="hljs-literal">undefined</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"null"</span>:val=<span class="hljs-literal">null</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"true"</span>:val=<span class="hljs-literal">true</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"false"</span>:val=<span class="hljs-literal">false</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">default</span>:nf=<span class="hljs-built_in">parseFloat</span>(val);<span class="hljs-keyword">if</span>(val==nf){val=nf}}<span class="hljs-keyword">return</span> val};normalizeValues=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">vals</span>)</span>{<span class="hljs-keyword">var</span> i,result=[];<span class="hljs-keyword">for</span>(i=vals.length;i--;){result[i]=normalizeValue(vals[i])}<span class="hljs-keyword">return</span> result};remove=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">vals,filter</span>)</span>{<span class="hljs-keyword">var</span> i,vl,result=[];<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>,vl=vals.length;i&lt;vl;i++){<span class="hljs-keyword">if</span>(vals[i]!==filter){result.push(vals[i])}}<span class="hljs-keyword">return</span> result};isNumber=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">num</span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">parseFloat</span>(num))&amp;&amp;<span class="hljs-built_in">isFinite</span>(num)};formatNumber=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">num,prec,groupsize,groupsep,decsep</span>)</span>{<span class="hljs-keyword">var</span> p,i;num=(prec===<span class="hljs-literal">false</span>?<span class="hljs-built_in">parseFloat</span>(num).toString():num.toFixed(prec)).split(<span class="hljs-string">""</span>);p=(p=$.inArray(<span class="hljs-string">"."</span>,num))&lt;<span class="hljs-number">0</span>?num.length:p;<span class="hljs-keyword">if</span>(p&lt;num.length){num[p]=decsep}<span class="hljs-keyword">for</span>(i=p-groupsize;i&gt;<span class="hljs-number">0</span>;i-=groupsize){num.splice(i,<span class="hljs-number">0</span>,groupsep)}<span class="hljs-keyword">return</span> num.join(<span class="hljs-string">""</span>)};all=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val,arr,ignoreNull</span>)</span>{<span class="hljs-keyword">var</span> i;<span class="hljs-keyword">for</span>(i=arr.length;i--;){<span class="hljs-keyword">if</span>(ignoreNull&amp;&amp;arr[i]===<span class="hljs-literal">null</span>)<span class="hljs-keyword">continue</span>;<span class="hljs-keyword">if</span>(arr[i]!==val){<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>}}<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>};sum=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">vals</span>)</span>{<span class="hljs-keyword">var</span> total=<span class="hljs-number">0</span>,i;<span class="hljs-keyword">for</span>(i=vals.length;i--;){total+=<span class="hljs-keyword">typeof</span> vals[i]===<span class="hljs-string">"number"</span>?vals[i]:<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span> total};ensureArray=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>)</span>{<span class="hljs-keyword">return</span> $.isArray(val)?val:[val]};addCSS=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">css</span>)</span>{<span class="hljs-keyword">var</span> tag,iefail;<span class="hljs-keyword">if</span>(<span class="hljs-built_in">document</span>.createStyleSheet){<span class="hljs-keyword">try</span>{<span class="hljs-built_in">document</span>.createStyleSheet().cssText=css;<span class="hljs-keyword">return</span>}<span class="hljs-keyword">catch</span>(e){iefail=<span class="hljs-literal">true</span>}}tag=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"style"</span>);tag.type=<span class="hljs-string">"text/css"</span>;<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">"head"</span>)[<span class="hljs-number">0</span>].appendChild(tag);<span class="hljs-keyword">if</span>(iefail){<span class="hljs-built_in">document</span>.styleSheets[<span class="hljs-built_in">document</span>.styleSheets.length<span class="hljs-number">-1</span>].cssText=css}<span class="hljs-keyword">else</span>{tag[<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">document</span>.body.style.WebkitAppearance==<span class="hljs-string">"string"</span>?<span class="hljs-string">"innerText"</span>:<span class="hljs-string">"innerHTML"</span>]=css}};$.fn.simpledraw=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">width,height,useExisting,interact</span>)</span>{<span class="hljs-keyword">var</span> target,mhandler;<span class="hljs-keyword">if</span>(useExisting&amp;&amp;(target=<span class="hljs-keyword">this</span>.data(<span class="hljs-string">"_jqs_vcanvas"</span>))){<span class="hljs-keyword">return</span> target}<span class="hljs-keyword">if</span>($.fn.sparkline.canvas===<span class="hljs-literal">false</span>){<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>($.fn.sparkline.canvas===<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">var</span> el=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"canvas"</span>);<span class="hljs-keyword">if</span>(!!(el.getContext&amp;&amp;el.getContext(<span class="hljs-string">"2d"</span>))){$.fn.sparkline.canvas=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">width,height,target,interact</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VCanvas_canvas(width,height,target,interact)}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-built_in">document</span>.namespaces&amp;&amp;!<span class="hljs-built_in">document</span>.namespaces.v){<span class="hljs-built_in">document</span>.namespaces.add(<span class="hljs-string">"v"</span>,<span class="hljs-string">"urn:schemas-microsoft-com:vml"</span>,<span class="hljs-string">"#default#VML"</span>);$.fn.sparkline.canvas=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">width,height,target,interact</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VCanvas_vml(width,height,target)}}<span class="hljs-keyword">else</span>{$.fn.sparkline.canvas=<span class="hljs-literal">false</span>;<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>}}<span class="hljs-keyword">if</span>(width===<span class="hljs-literal">undefined</span>){width=$(<span class="hljs-keyword">this</span>).innerWidth()}<span class="hljs-keyword">if</span>(height===<span class="hljs-literal">undefined</span>){height=$(<span class="hljs-keyword">this</span>).innerHeight()}target=$.fn.sparkline.canvas(width,height,<span class="hljs-keyword">this</span>,interact);mhandler=$(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"_jqs_mhandler"</span>);<span class="hljs-keyword">if</span>(mhandler){mhandler.registerCanvas(target)}<span class="hljs-keyword">return</span> target};$.fn.cleardraw=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> target=<span class="hljs-keyword">this</span>.data(<span class="hljs-string">"_jqs_vcanvas"</span>);<span class="hljs-keyword">if</span>(target){target.reset()}};$.RangeMapClass=RangeMap=createClass({<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">map</span>)</span>{<span class="hljs-keyword">var</span> key,range,rangelist=[];<span class="hljs-keyword">for</span>(key <span class="hljs-keyword">in</span> map){<span class="hljs-keyword">if</span>(map.hasOwnProperty(key)&amp;&amp;<span class="hljs-keyword">typeof</span> key===<span class="hljs-string">"string"</span>&amp;&amp;key.indexOf(<span class="hljs-string">":"</span>)&gt;<span class="hljs-number">-1</span>){range=key.split(<span class="hljs-string">":"</span>);range[<span class="hljs-number">0</span>]=range[<span class="hljs-number">0</span>].length===<span class="hljs-number">0</span>?-<span class="hljs-literal">Infinity</span>:<span class="hljs-built_in">parseFloat</span>(range[<span class="hljs-number">0</span>]);range[<span class="hljs-number">1</span>]=range[<span class="hljs-number">1</span>].length===<span class="hljs-number">0</span>?<span class="hljs-literal">Infinity</span>:<span class="hljs-built_in">parseFloat</span>(range[<span class="hljs-number">1</span>]);range[<span class="hljs-number">2</span>]=map[key];rangelist.push(range)}}<span class="hljs-keyword">this</span>.map=map;<span class="hljs-keyword">this</span>.rangelist=rangelist||<span class="hljs-literal">false</span>},<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>)</span>{<span class="hljs-keyword">var</span> rangelist=<span class="hljs-keyword">this</span>.rangelist,i,range,result;<span class="hljs-keyword">if</span>((result=<span class="hljs-keyword">this</span>.map[value])!==<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">return</span> result}<span class="hljs-keyword">if</span>(rangelist){<span class="hljs-keyword">for</span>(i=rangelist.length;i--;){range=rangelist[i];<span class="hljs-keyword">if</span>(range[<span class="hljs-number">0</span>]&lt;=value&amp;&amp;range[<span class="hljs-number">1</span>]&gt;=value){<span class="hljs-keyword">return</span> range[<span class="hljs-number">2</span>]}}}<span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>}});$.range_map=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">map</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RangeMap(map)};MouseHandler=createClass({<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,options</span>)</span>{<span class="hljs-keyword">var</span> $el=$(el);<span class="hljs-keyword">this</span>.$el=$el;<span class="hljs-keyword">this</span>.options=options;<span class="hljs-keyword">this</span>.currentPageX=<span class="hljs-number">0</span>;<span class="hljs-keyword">this</span>.currentPageY=<span class="hljs-number">0</span>;<span class="hljs-keyword">this</span>.el=el;<span class="hljs-keyword">this</span>.splist=[];<span class="hljs-keyword">this</span>.tooltip=<span class="hljs-literal">null</span>;<span class="hljs-keyword">this</span>.over=<span class="hljs-literal">false</span>;<span class="hljs-keyword">this</span>.displayTooltips=!options.get(<span class="hljs-string">"disableTooltips"</span>);<span class="hljs-keyword">this</span>.highlightEnabled=!options.get(<span class="hljs-string">"disableHighlight"</span>)},<span class="hljs-attr">registerSparkline</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sp</span>)</span>{<span class="hljs-keyword">this</span>.splist.push(sp);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.over){<span class="hljs-keyword">this</span>.updateDisplay()}},<span class="hljs-attr">registerCanvas</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">canvas</span>)</span>{<span class="hljs-keyword">var</span> $canvas=$(canvas.canvas);<span class="hljs-keyword">this</span>.canvas=canvas;<span class="hljs-keyword">this</span>.$canvas=$canvas;$canvas.mouseenter($.proxy(<span class="hljs-keyword">this</span>.mouseenter,<span class="hljs-keyword">this</span>));$canvas.mouseleave($.proxy(<span class="hljs-keyword">this</span>.mouseleave,<span class="hljs-keyword">this</span>));$canvas.click($.proxy(<span class="hljs-keyword">this</span>.mouseclick,<span class="hljs-keyword">this</span>))},<span class="hljs-attr">reset</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">removeTooltip</span>)</span>{<span class="hljs-keyword">this</span>.splist=[];<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.tooltip&amp;&amp;removeTooltip){<span class="hljs-keyword">this</span>.tooltip.remove();<span class="hljs-keyword">this</span>.tooltip=<span class="hljs-literal">undefined</span>}},<span class="hljs-attr">mouseclick</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> clickEvent=$.Event(<span class="hljs-string">"sparklineClick"</span>);clickEvent.originalEvent=e;clickEvent.sparklines=<span class="hljs-keyword">this</span>.splist;<span class="hljs-keyword">this</span>.$el.trigger(clickEvent)},<span class="hljs-attr">mouseenter</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{$(<span class="hljs-built_in">document</span>.body).unbind(<span class="hljs-string">"mousemove.jqs"</span>);$(<span class="hljs-built_in">document</span>.body).bind(<span class="hljs-string">"mousemove.jqs"</span>,$.proxy(<span class="hljs-keyword">this</span>.mousemove,<span class="hljs-keyword">this</span>));<span class="hljs-keyword">this</span>.over=<span class="hljs-literal">true</span>;<span class="hljs-keyword">this</span>.currentPageX=e.pageX;<span class="hljs-keyword">this</span>.currentPageY=e.pageY;<span class="hljs-keyword">this</span>.currentEl=e.target;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.tooltip&amp;&amp;<span class="hljs-keyword">this</span>.displayTooltips){<span class="hljs-keyword">this</span>.tooltip=<span class="hljs-keyword">new</span> Tooltip(<span class="hljs-keyword">this</span>.options);<span class="hljs-keyword">this</span>.tooltip.updatePosition(e.pageX,e.pageY)}<span class="hljs-keyword">this</span>.updateDisplay()},<span class="hljs-attr">mouseleave</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{$(<span class="hljs-built_in">document</span>.body).unbind(<span class="hljs-string">"mousemove.jqs"</span>);<span class="hljs-keyword">var</span> splist=<span class="hljs-keyword">this</span>.splist,spcount=splist.length,needsRefresh=<span class="hljs-literal">false</span>,sp,i;<span class="hljs-keyword">this</span>.over=<span class="hljs-literal">false</span>;<span class="hljs-keyword">this</span>.currentEl=<span class="hljs-literal">null</span>;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.tooltip){<span class="hljs-keyword">this</span>.tooltip.remove();<span class="hljs-keyword">this</span>.tooltip=<span class="hljs-literal">null</span>}<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;spcount;i++){sp=splist[i];<span class="hljs-keyword">if</span>(sp.clearRegionHighlight()){needsRefresh=<span class="hljs-literal">true</span>}}<span class="hljs-keyword">if</span>(needsRefresh){<span class="hljs-keyword">this</span>.canvas.render()}},<span class="hljs-attr">mousemove</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">this</span>.currentPageX=e.pageX;<span class="hljs-keyword">this</span>.currentPageY=e.pageY;<span class="hljs-keyword">this</span>.currentEl=e.target;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.tooltip){<span class="hljs-keyword">this</span>.tooltip.updatePosition(e.pageX,e.pageY)}<span class="hljs-keyword">this</span>.updateDisplay()},<span class="hljs-attr">updateDisplay</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> splist=<span class="hljs-keyword">this</span>.splist,spcount=splist.length,needsRefresh=<span class="hljs-literal">false</span>,offset=<span class="hljs-keyword">this</span>.$canvas.offset(),localX=<span class="hljs-keyword">this</span>.currentPageX-offset.left,localY=<span class="hljs-keyword">this</span>.currentPageY-offset.top,tooltiphtml,sp,i,result,changeEvent;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.over){<span class="hljs-keyword">return</span>}<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;spcount;i++){sp=splist[i];result=sp.setRegionHighlight(<span class="hljs-keyword">this</span>.currentEl,localX,localY);<span class="hljs-keyword">if</span>(result){needsRefresh=<span class="hljs-literal">true</span>}}<span class="hljs-keyword">if</span>(needsRefresh){changeEvent=$.Event(<span class="hljs-string">"sparklineRegionChange"</span>);changeEvent.sparklines=<span class="hljs-keyword">this</span>.splist;<span class="hljs-keyword">this</span>.$el.trigger(changeEvent);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.tooltip){tooltiphtml=<span class="hljs-string">""</span>;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;spcount;i++){sp=splist[i];tooltiphtml+=sp.getCurrentRegionTooltip()}<span class="hljs-keyword">this</span>.tooltip.setContent(tooltiphtml)}<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.disableHighlight){<span class="hljs-keyword">this</span>.canvas.render()}}<span class="hljs-keyword">if</span>(result===<span class="hljs-literal">null</span>){<span class="hljs-keyword">this</span>.mouseleave()}}});Tooltip=createClass({<span class="hljs-attr">sizeStyle</span>:<span class="hljs-string">"position: static !important;"</span>+<span class="hljs-string">"display: block !important;"</span>+<span class="hljs-string">"visibility: hidden !important;"</span>+<span class="hljs-string">"float: left !important;"</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>)</span>{<span class="hljs-keyword">var</span> tooltipClassname=options.get(<span class="hljs-string">"tooltipClassname"</span>,<span class="hljs-string">"jqstooltip"</span>),sizetipStyle=<span class="hljs-keyword">this</span>.sizeStyle,offset;<span class="hljs-keyword">this</span>.container=options.get(<span class="hljs-string">"tooltipContainer"</span>)||<span class="hljs-built_in">document</span>.body;<span class="hljs-keyword">this</span>.tooltipOffsetX=options.get(<span class="hljs-string">"tooltipOffsetX"</span>,<span class="hljs-number">10</span>);<span class="hljs-keyword">this</span>.tooltipOffsetY=options.get(<span class="hljs-string">"tooltipOffsetY"</span>,<span class="hljs-number">12</span>);$(<span class="hljs-string">"#jqssizetip"</span>).remove();$(<span class="hljs-string">"#jqstooltip"</span>).remove();<span class="hljs-keyword">this</span>.sizetip=$(<span class="hljs-string">"&lt;div/&gt;"</span>,{<span class="hljs-attr">id</span>:<span class="hljs-string">"jqssizetip"</span>,<span class="hljs-attr">style</span>:sizetipStyle,<span class="hljs-string">"class"</span>:tooltipClassname});<span class="hljs-keyword">this</span>.tooltip=$(<span class="hljs-string">"&lt;div/&gt;"</span>,{<span class="hljs-attr">id</span>:<span class="hljs-string">"jqstooltip"</span>,<span class="hljs-string">"class"</span>:tooltipClassname}).appendTo(<span class="hljs-keyword">this</span>.container);offset=<span class="hljs-keyword">this</span>.tooltip.offset();<span class="hljs-keyword">this</span>.offsetLeft=offset.left;<span class="hljs-keyword">this</span>.offsetTop=offset.top;<span class="hljs-keyword">this</span>.hidden=<span class="hljs-literal">true</span>;$(<span class="hljs-built_in">window</span>).unbind(<span class="hljs-string">"resize.jqs scroll.jqs"</span>);$(<span class="hljs-built_in">window</span>).bind(<span class="hljs-string">"resize.jqs scroll.jqs"</span>,$.proxy(<span class="hljs-keyword">this</span>.updateWindowDims,<span class="hljs-keyword">this</span>));<span class="hljs-keyword">this</span>.updateWindowDims()},<span class="hljs-attr">updateWindowDims</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.scrollTop=$(<span class="hljs-built_in">window</span>).scrollTop();<span class="hljs-keyword">this</span>.scrollLeft=$(<span class="hljs-built_in">window</span>).scrollLeft();<span class="hljs-keyword">this</span>.scrollRight=<span class="hljs-keyword">this</span>.scrollLeft+$(<span class="hljs-built_in">window</span>).width();<span class="hljs-keyword">this</span>.updatePosition()},<span class="hljs-attr">getSize</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">content</span>)</span>{<span class="hljs-keyword">this</span>.sizetip.html(content).appendTo(<span class="hljs-keyword">this</span>.container);<span class="hljs-keyword">this</span>.width=<span class="hljs-keyword">this</span>.sizetip.width()+<span class="hljs-number">1</span>;<span class="hljs-keyword">this</span>.height=<span class="hljs-keyword">this</span>.sizetip.height();<span class="hljs-keyword">this</span>.sizetip.remove()},<span class="hljs-attr">setContent</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">content</span>)</span>{<span class="hljs-keyword">if</span>(!content){<span class="hljs-keyword">this</span>.tooltip.css(<span class="hljs-string">"visibility"</span>,<span class="hljs-string">"hidden"</span>);<span class="hljs-keyword">this</span>.hidden=<span class="hljs-literal">true</span>;<span class="hljs-keyword">return</span>}<span class="hljs-keyword">this</span>.getSize(content);<span class="hljs-keyword">this</span>.tooltip.html(content).css({<span class="hljs-attr">width</span>:<span class="hljs-keyword">this</span>.width,<span class="hljs-attr">height</span>:<span class="hljs-keyword">this</span>.height,<span class="hljs-attr">visibility</span>:<span class="hljs-string">"visible"</span>});<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.hidden){<span class="hljs-keyword">this</span>.hidden=<span class="hljs-literal">false</span>;<span class="hljs-keyword">this</span>.updatePosition()}},<span class="hljs-attr">updatePosition</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x,y</span>)</span>{<span class="hljs-keyword">if</span>(x===<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.mousex===<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">return</span>}x=<span class="hljs-keyword">this</span>.mousex-<span class="hljs-keyword">this</span>.offsetLeft;y=<span class="hljs-keyword">this</span>.mousey-<span class="hljs-keyword">this</span>.offsetTop}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">this</span>.mousex=x=x-<span class="hljs-keyword">this</span>.offsetLeft;<span class="hljs-keyword">this</span>.mousey=y=y-<span class="hljs-keyword">this</span>.offsetTop}<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.height||!<span class="hljs-keyword">this</span>.width||<span class="hljs-keyword">this</span>.hidden){<span class="hljs-keyword">return</span>}y-=<span class="hljs-keyword">this</span>.height+<span class="hljs-keyword">this</span>.tooltipOffsetY;x+=<span class="hljs-keyword">this</span>.tooltipOffsetX;<span class="hljs-keyword">if</span>(y&lt;<span class="hljs-keyword">this</span>.scrollTop){y=<span class="hljs-keyword">this</span>.scrollTop}<span class="hljs-keyword">if</span>(x&lt;<span class="hljs-keyword">this</span>.scrollLeft){x=<span class="hljs-keyword">this</span>.scrollLeft}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x+<span class="hljs-keyword">this</span>.width&gt;<span class="hljs-keyword">this</span>.scrollRight){x=<span class="hljs-keyword">this</span>.scrollRight-<span class="hljs-keyword">this</span>.width}<span class="hljs-keyword">this</span>.tooltip.css({<span class="hljs-attr">left</span>:x,<span class="hljs-attr">top</span>:y})},<span class="hljs-attr">remove</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.tooltip.remove();<span class="hljs-keyword">this</span>.sizetip.remove();<span class="hljs-keyword">this</span>.sizetip=<span class="hljs-keyword">this</span>.tooltip=<span class="hljs-literal">undefined</span>;$(<span class="hljs-built_in">window</span>).unbind(<span class="hljs-string">"resize.jqs scroll.jqs"</span>)}});initStyles=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{addCSS(defaultStyles)};$(initStyles);pending=[];$.fn.sparkline=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">userValues,userOptions</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> options=<span class="hljs-keyword">new</span> $.fn.sparkline.options(<span class="hljs-keyword">this</span>,userOptions),$<span class="hljs-keyword">this</span>=$(<span class="hljs-keyword">this</span>),render,i;render=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> values,width,height,tmp,mhandler,sp,vals;<span class="hljs-keyword">if</span>(userValues===<span class="hljs-string">"html"</span>||userValues===<span class="hljs-literal">undefined</span>){vals=<span class="hljs-keyword">this</span>.getAttribute(options.get(<span class="hljs-string">"tagValuesAttribute"</span>));<span class="hljs-keyword">if</span>(vals===<span class="hljs-literal">undefined</span>||vals===<span class="hljs-literal">null</span>){vals=$<span class="hljs-keyword">this</span>.html()}values=vals.replace(<span class="hljs-regexp">/(^\s*&lt;!--)|(--&gt;\s*$)|\s+/g</span>,<span class="hljs-string">""</span>).split(<span class="hljs-string">","</span>)}<span class="hljs-keyword">else</span>{values=userValues}width=options.get(<span class="hljs-string">"width"</span>)===<span class="hljs-string">"auto"</span>?values.length*options.get(<span class="hljs-string">"defaultPixelsPerValue"</span>):options.get(<span class="hljs-string">"width"</span>);<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"height"</span>)===<span class="hljs-string">"auto"</span>){<span class="hljs-keyword">if</span>(!options.get(<span class="hljs-string">"composite"</span>)||!$.data(<span class="hljs-keyword">this</span>,<span class="hljs-string">"_jqs_vcanvas"</span>)){tmp=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"span"</span>);tmp.innerHTML=<span class="hljs-string">"a"</span>;$<span class="hljs-keyword">this</span>.html(tmp);height=$(tmp).innerHeight()||$(tmp).height();$(tmp).remove();tmp=<span class="hljs-literal">null</span>}}<span class="hljs-keyword">else</span>{height=options.get(<span class="hljs-string">"height"</span>)}<span class="hljs-keyword">if</span>(!options.get(<span class="hljs-string">"disableInteraction"</span>)){mhandler=$.data(<span class="hljs-keyword">this</span>,<span class="hljs-string">"_jqs_mhandler"</span>);<span class="hljs-keyword">if</span>(!mhandler){mhandler=<span class="hljs-keyword">new</span> MouseHandler(<span class="hljs-keyword">this</span>,options);$.data(<span class="hljs-keyword">this</span>,<span class="hljs-string">"_jqs_mhandler"</span>,mhandler)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!options.get(<span class="hljs-string">"composite"</span>)){mhandler.reset()}}<span class="hljs-keyword">else</span>{mhandler=<span class="hljs-literal">false</span>}<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"composite"</span>)&amp;&amp;!$.data(<span class="hljs-keyword">this</span>,<span class="hljs-string">"_jqs_vcanvas"</span>)){<span class="hljs-keyword">if</span>(!$.data(<span class="hljs-keyword">this</span>,<span class="hljs-string">"_jqs_errnotify"</span>)){alert(<span class="hljs-string">"Attempted to attach a composite sparkline to an element with no existing sparkline"</span>);$.data(<span class="hljs-keyword">this</span>,<span class="hljs-string">"_jqs_errnotify"</span>,<span class="hljs-literal">true</span>)}<span class="hljs-keyword">return</span>}sp=<span class="hljs-keyword">new</span>($.fn.sparkline[options.get(<span class="hljs-string">"type"</span>)])(<span class="hljs-keyword">this</span>,values,options,width,height);sp.render();<span class="hljs-keyword">if</span>(mhandler){mhandler.registerSparkline(sp)}};<span class="hljs-keyword">if</span>($(<span class="hljs-keyword">this</span>).html()&amp;&amp;!options.get(<span class="hljs-string">"disableHiddenCheck"</span>)&amp;&amp;$(<span class="hljs-keyword">this</span>).is(<span class="hljs-string">":hidden"</span>)||!$(<span class="hljs-keyword">this</span>).parents(<span class="hljs-string">"body"</span>).length){<span class="hljs-keyword">if</span>(!options.get(<span class="hljs-string">"composite"</span>)&amp;&amp;$.data(<span class="hljs-keyword">this</span>,<span class="hljs-string">"_jqs_pending"</span>)){<span class="hljs-keyword">for</span>(i=pending.length;i;i--){<span class="hljs-keyword">if</span>(pending[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>]==<span class="hljs-keyword">this</span>){pending.splice(i<span class="hljs-number">-1</span>,<span class="hljs-number">1</span>)}}}pending.push([<span class="hljs-keyword">this</span>,render]);$.data(<span class="hljs-keyword">this</span>,<span class="hljs-string">"_jqs_pending"</span>,<span class="hljs-literal">true</span>)}<span class="hljs-keyword">else</span>{render.call(<span class="hljs-keyword">this</span>)}})};$.fn.sparkline.defaults=getDefaults();$.sparkline_display_visible=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> el,i,pl;<span class="hljs-keyword">var</span> done=[];<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>,pl=pending.length;i&lt;pl;i++){el=pending[i][<span class="hljs-number">0</span>];<span class="hljs-keyword">if</span>($(el).is(<span class="hljs-string">":visible"</span>)&amp;&amp;!$(el).parents().is(<span class="hljs-string">":hidden"</span>)){pending[i][<span class="hljs-number">1</span>].call(el);$.data(pending[i][<span class="hljs-number">0</span>],<span class="hljs-string">"_jqs_pending"</span>,<span class="hljs-literal">false</span>);done.push(i)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!$(el).closest(<span class="hljs-string">"html"</span>).length&amp;&amp;!$.data(el,<span class="hljs-string">"_jqs_pending"</span>)){$.data(pending[i][<span class="hljs-number">0</span>],<span class="hljs-string">"_jqs_pending"</span>,<span class="hljs-literal">false</span>);done.push(i)}}<span class="hljs-keyword">for</span>(i=done.length;i;i--){pending.splice(done[i<span class="hljs-number">-1</span>],<span class="hljs-number">1</span>)}};$.fn.sparkline.options=createClass({<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tag,userOptions</span>)</span>{<span class="hljs-keyword">var</span> extendedOptions,defaults,base,tagOptionType;<span class="hljs-keyword">this</span>.userOptions=userOptions=userOptions||{};<span class="hljs-keyword">this</span>.tag=tag;<span class="hljs-keyword">this</span>.tagValCache={};defaults=$.fn.sparkline.defaults;base=defaults.common;<span class="hljs-keyword">this</span>.tagOptionsPrefix=userOptions.enableTagOptions&amp;&amp;(userOptions.tagOptionsPrefix||base.tagOptionsPrefix);tagOptionType=<span class="hljs-keyword">this</span>.getTagSetting(<span class="hljs-string">"type"</span>);<span class="hljs-keyword">if</span>(tagOptionType===UNSET_OPTION){extendedOptions=defaults[userOptions.type||base.type]}<span class="hljs-keyword">else</span>{extendedOptions=defaults[tagOptionType]}<span class="hljs-keyword">this</span>.mergedOptions=$.extend({},base,extendedOptions,userOptions)},<span class="hljs-attr">getTagSetting</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>)</span>{<span class="hljs-keyword">var</span> prefix=<span class="hljs-keyword">this</span>.tagOptionsPrefix,val,i,pairs,keyval;<span class="hljs-keyword">if</span>(prefix===<span class="hljs-literal">false</span>||prefix===<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">return</span> UNSET_OPTION}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.tagValCache.hasOwnProperty(key)){val=<span class="hljs-keyword">this</span>.tagValCache.key}<span class="hljs-keyword">else</span>{val=<span class="hljs-keyword">this</span>.tag.getAttribute(prefix+key);<span class="hljs-keyword">if</span>(val===<span class="hljs-literal">undefined</span>||val===<span class="hljs-literal">null</span>){val=UNSET_OPTION}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(val.substr(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)===<span class="hljs-string">"["</span>){val=val.substr(<span class="hljs-number">1</span>,val.length<span class="hljs-number">-2</span>).split(<span class="hljs-string">","</span>);<span class="hljs-keyword">for</span>(i=val.length;i--;){val[i]=normalizeValue(val[i].replace(<span class="hljs-regexp">/(^\s*)|(\s*$)/g</span>,<span class="hljs-string">""</span>))}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(val.substr(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)===<span class="hljs-string">"{"</span>){pairs=val.substr(<span class="hljs-number">1</span>,val.length<span class="hljs-number">-2</span>).split(<span class="hljs-string">","</span>);val={};<span class="hljs-keyword">for</span>(i=pairs.length;i--;){keyval=pairs[i].split(<span class="hljs-string">":"</span>,<span class="hljs-number">2</span>);val[keyval[<span class="hljs-number">0</span>].replace(<span class="hljs-regexp">/(^\s*)|(\s*$)/g</span>,<span class="hljs-string">""</span>)]=normalizeValue(keyval[<span class="hljs-number">1</span>].replace(<span class="hljs-regexp">/(^\s*)|(\s*$)/g</span>,<span class="hljs-string">""</span>))}}<span class="hljs-keyword">else</span>{val=normalizeValue(val)}<span class="hljs-keyword">this</span>.tagValCache.key=val}<span class="hljs-keyword">return</span> val},<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key,defaultval</span>)</span>{<span class="hljs-keyword">var</span> tagOption=<span class="hljs-keyword">this</span>.getTagSetting(key),result;<span class="hljs-keyword">if</span>(tagOption!==UNSET_OPTION){<span class="hljs-keyword">return</span> tagOption}<span class="hljs-keyword">return</span>(result=<span class="hljs-keyword">this</span>.mergedOptions[key])===<span class="hljs-literal">undefined</span>?defaultval:result}});$.fn.sparkline._base=createClass({<span class="hljs-attr">disabled</span>:<span class="hljs-literal">false</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,values,options,width,height</span>)</span>{<span class="hljs-keyword">this</span>.el=el;<span class="hljs-keyword">this</span>.$el=$(el);<span class="hljs-keyword">this</span>.values=values;<span class="hljs-keyword">this</span>.options=options;<span class="hljs-keyword">this</span>.width=width;<span class="hljs-keyword">this</span>.height=height;<span class="hljs-keyword">this</span>.currentRegion=<span class="hljs-literal">undefined</span>},<span class="hljs-attr">initTarget</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> interactive=!<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"disableInteraction"</span>);<span class="hljs-keyword">if</span>(!(<span class="hljs-keyword">this</span>.target=<span class="hljs-keyword">this</span>.$el.simpledraw(<span class="hljs-keyword">this</span>.width,<span class="hljs-keyword">this</span>.height,<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"composite"</span>),interactive))){<span class="hljs-keyword">this</span>.disabled=<span class="hljs-literal">true</span>}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">this</span>.canvasWidth=<span class="hljs-keyword">this</span>.target.pixelWidth;<span class="hljs-keyword">this</span>.canvasHeight=<span class="hljs-keyword">this</span>.target.pixelHeight}},<span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.disabled){<span class="hljs-keyword">this</span>.el.innerHTML=<span class="hljs-string">""</span>;<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>}<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>},<span class="hljs-attr">getRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x,y</span>)</span>{},<span class="hljs-attr">setRegionHighlight</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,x,y</span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion,highlightEnabled=!<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"disableHighlight"</span>),newRegion;<span class="hljs-keyword">if</span>(x&gt;<span class="hljs-keyword">this</span>.canvasWidth||y&gt;<span class="hljs-keyword">this</span>.canvasHeight||x&lt;<span class="hljs-number">0</span>||y&lt;<span class="hljs-number">0</span>){<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>}newRegion=<span class="hljs-keyword">this</span>.getRegion(el,x,y);<span class="hljs-keyword">if</span>(currentRegion!==newRegion){<span class="hljs-keyword">if</span>(currentRegion!==<span class="hljs-literal">undefined</span>&amp;&amp;highlightEnabled){<span class="hljs-keyword">this</span>.removeHighlight()}<span class="hljs-keyword">this</span>.currentRegion=newRegion;<span class="hljs-keyword">if</span>(newRegion!==<span class="hljs-literal">undefined</span>&amp;&amp;highlightEnabled){<span class="hljs-keyword">this</span>.renderHighlight()}<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>},<span class="hljs-attr">clearRegionHighlight</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.currentRegion!==<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">this</span>.removeHighlight();<span class="hljs-keyword">this</span>.currentRegion=<span class="hljs-literal">undefined</span>;<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>},<span class="hljs-attr">renderHighlight</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.changeHighlight(<span class="hljs-literal">true</span>)},<span class="hljs-attr">removeHighlight</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.changeHighlight(<span class="hljs-literal">false</span>)},<span class="hljs-attr">changeHighlight</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">highlight</span>)</span>{},<span class="hljs-attr">getCurrentRegionTooltip</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> options=<span class="hljs-keyword">this</span>.options,header=<span class="hljs-string">""</span>,entries=[],fields,formats,formatlen,fclass,text,i,showFields,showFieldsKey,newFields,fv,formatter,format,fieldlen,j;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.currentRegion===<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">return</span><span class="hljs-string">""</span>}fields=<span class="hljs-keyword">this</span>.getCurrentRegionFields();formatter=options.get(<span class="hljs-string">"tooltipFormatter"</span>);<span class="hljs-keyword">if</span>(formatter){<span class="hljs-keyword">return</span> formatter(<span class="hljs-keyword">this</span>,options,fields)}<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"tooltipChartTitle"</span>)){header+=<span class="hljs-string">'&lt;div class="jqs jqstitle"&gt;'</span>+options.get(<span class="hljs-string">"tooltipChartTitle"</span>)+<span class="hljs-string">"&lt;/div&gt;\n"</span>}formats=<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"tooltipFormat"</span>);<span class="hljs-keyword">if</span>(!formats){<span class="hljs-keyword">return</span><span class="hljs-string">""</span>}<span class="hljs-keyword">if</span>(!$.isArray(formats)){formats=[formats]}<span class="hljs-keyword">if</span>(!$.isArray(fields)){fields=[fields]}showFields=<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"tooltipFormatFieldlist"</span>);showFieldsKey=<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"tooltipFormatFieldlistKey"</span>);<span class="hljs-keyword">if</span>(showFields&amp;&amp;showFieldsKey){newFields=[];<span class="hljs-keyword">for</span>(i=fields.length;i--;){fv=fields[i][showFieldsKey];<span class="hljs-keyword">if</span>((j=$.inArray(fv,showFields))!=<span class="hljs-number">-1</span>){newFields[j]=fields[i]}}fields=newFields}formatlen=formats.length;fieldlen=fields.length;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;formatlen;i++){format=formats[i];<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> format===<span class="hljs-string">"string"</span>){format=<span class="hljs-keyword">new</span> SPFormat(format)}fclass=format.fclass||<span class="hljs-string">"jqsfield"</span>;<span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>;j&lt;fieldlen;j++){<span class="hljs-keyword">if</span>(!fields[j].isNull||!options.get(<span class="hljs-string">"tooltipSkipNull"</span>)){$.extend(fields[j],{<span class="hljs-attr">prefix</span>:options.get(<span class="hljs-string">"tooltipPrefix"</span>),<span class="hljs-attr">suffix</span>:options.get(<span class="hljs-string">"tooltipSuffix"</span>)});text=format.render(fields[j],options.get(<span class="hljs-string">"tooltipValueLookups"</span>),options);entries.push(<span class="hljs-string">'&lt;div class="'</span>+fclass+<span class="hljs-string">'"&gt;'</span>+text+<span class="hljs-string">"&lt;/div&gt;"</span>)}}}<span class="hljs-keyword">if</span>(entries.length){<span class="hljs-keyword">return</span> header+entries.join(<span class="hljs-string">"\n"</span>)}<span class="hljs-keyword">return</span><span class="hljs-string">""</span>},<span class="hljs-attr">getCurrentRegionFields</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{},<span class="hljs-attr">calcHighlightColor</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">color,options</span>)</span>{<span class="hljs-keyword">var</span> highlightColor=options.get(<span class="hljs-string">"highlightColor"</span>),lighten=options.get(<span class="hljs-string">"highlightLighten"</span>),parse,mult,rgbnew,i;<span class="hljs-keyword">if</span>(highlightColor){<span class="hljs-keyword">return</span> highlightColor}<span class="hljs-keyword">if</span>(lighten){parse=<span class="hljs-regexp">/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i</span>.exec(color)||<span class="hljs-regexp">/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i</span>.exec(color);<span class="hljs-keyword">if</span>(parse){rgbnew=[];mult=color.length===<span class="hljs-number">4</span>?<span class="hljs-number">16</span>:<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++){rgbnew[i]=clipval(<span class="hljs-built_in">Math</span>.round(<span class="hljs-built_in">parseInt</span>(parse[i+<span class="hljs-number">1</span>],<span class="hljs-number">16</span>)*mult*lighten),<span class="hljs-number">0</span>,<span class="hljs-number">255</span>)}<span class="hljs-keyword">return</span><span class="hljs-string">"rgb("</span>+rgbnew.join(<span class="hljs-string">","</span>)+<span class="hljs-string">")"</span>}}<span class="hljs-keyword">return</span> color}});barHighlightMixin={<span class="hljs-attr">changeHighlight</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">highlight</span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion,target=<span class="hljs-keyword">this</span>.target,shapeids=<span class="hljs-keyword">this</span>.regionShapes[currentRegion],newShapes;<span class="hljs-keyword">if</span>(shapeids){newShapes=<span class="hljs-keyword">this</span>.renderRegion(currentRegion,highlight);<span class="hljs-keyword">if</span>($.isArray(newShapes)||$.isArray(shapeids)){target.replaceWithShapes(shapeids,newShapes);<span class="hljs-keyword">this</span>.regionShapes[currentRegion]=$.map(newShapes,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">newShape</span>)</span>{<span class="hljs-keyword">return</span> newShape.id})}<span class="hljs-keyword">else</span>{target.replaceWithShape(shapeids,newShapes);<span class="hljs-keyword">this</span>.regionShapes[currentRegion]=newShapes.id}}},<span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> values=<span class="hljs-keyword">this</span>.values,target=<span class="hljs-keyword">this</span>.target,regionShapes=<span class="hljs-keyword">this</span>.regionShapes,shapes,ids,i,j;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.cls._super.render.call(<span class="hljs-keyword">this</span>)){<span class="hljs-keyword">return</span>}<span class="hljs-keyword">for</span>(i=values.length;i--;){shapes=<span class="hljs-keyword">this</span>.renderRegion(i);<span class="hljs-keyword">if</span>(shapes){<span class="hljs-keyword">if</span>($.isArray(shapes)){ids=[];<span class="hljs-keyword">for</span>(j=shapes.length;j--;){shapes[j].append();ids.push(shapes[j].id)}regionShapes[i]=ids}<span class="hljs-keyword">else</span>{shapes.append();regionShapes[i]=shapes.id}}<span class="hljs-keyword">else</span>{regionShapes[i]=<span class="hljs-literal">null</span>}}target.render()}};$.fn.sparkline.line=line=createClass($.fn.sparkline._base,{<span class="hljs-attr">type</span>:<span class="hljs-string">"line"</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,values,options,width,height</span>)</span>{line._super.init.call(<span class="hljs-keyword">this</span>,el,values,options,width,height);<span class="hljs-keyword">this</span>.vertices=[];<span class="hljs-keyword">this</span>.regionMap=[];<span class="hljs-keyword">this</span>.xvalues=[];<span class="hljs-keyword">this</span>.yvalues=[];<span class="hljs-keyword">this</span>.yminmax=[];<span class="hljs-keyword">this</span>.hightlightSpotId=<span class="hljs-literal">null</span>;<span class="hljs-keyword">this</span>.lastShapeId=<span class="hljs-literal">null</span>;<span class="hljs-keyword">this</span>.initTarget()},<span class="hljs-attr">getRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,x,y</span>)</span>{<span class="hljs-keyword">var</span> i,regionMap=<span class="hljs-keyword">this</span>.regionMap;<span class="hljs-keyword">for</span>(i=regionMap.length;i--;){<span class="hljs-keyword">if</span>(regionMap[i]!==<span class="hljs-literal">null</span>&amp;&amp;x&gt;=regionMap[i][<span class="hljs-number">0</span>]&amp;&amp;x&lt;=regionMap[i][<span class="hljs-number">1</span>]){<span class="hljs-keyword">return</span> regionMap[i][<span class="hljs-number">2</span>]}}<span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>},<span class="hljs-attr">getCurrentRegionFields</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion;<span class="hljs-keyword">return</span>{<span class="hljs-attr">isNull</span>:<span class="hljs-keyword">this</span>.yvalues[currentRegion]===<span class="hljs-literal">null</span>,<span class="hljs-attr">x</span>:<span class="hljs-keyword">this</span>.xvalues[currentRegion],<span class="hljs-attr">y</span>:<span class="hljs-keyword">this</span>.yvalues[currentRegion],<span class="hljs-attr">color</span>:<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"lineColor"</span>),<span class="hljs-attr">fillColor</span>:<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"fillColor"</span>),<span class="hljs-attr">offset</span>:currentRegion}},<span class="hljs-attr">renderHighlight</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion,target=<span class="hljs-keyword">this</span>.target,vertex=<span class="hljs-keyword">this</span>.vertices[currentRegion],options=<span class="hljs-keyword">this</span>.options,spotRadius=options.get(<span class="hljs-string">"spotRadius"</span>),highlightSpotColor=options.get(<span class="hljs-string">"highlightSpotColor"</span>),highlightLineColor=options.get(<span class="hljs-string">"highlightLineColor"</span>),highlightSpot,highlightLine;<span class="hljs-keyword">if</span>(!vertex){<span class="hljs-keyword">return</span>}<span class="hljs-keyword">if</span>(spotRadius&amp;&amp;highlightSpotColor){highlightSpot=target.drawCircle(vertex[<span class="hljs-number">0</span>],vertex[<span class="hljs-number">1</span>],spotRadius,<span class="hljs-literal">undefined</span>,highlightSpotColor);<span class="hljs-keyword">this</span>.highlightSpotId=highlightSpot.id;target.insertAfterShape(<span class="hljs-keyword">this</span>.lastShapeId,highlightSpot)}<span class="hljs-keyword">if</span>(highlightLineColor){highlightLine=target.drawLine(vertex[<span class="hljs-number">0</span>],<span class="hljs-keyword">this</span>.canvasTop,vertex[<span class="hljs-number">0</span>],<span class="hljs-keyword">this</span>.canvasTop+<span class="hljs-keyword">this</span>.canvasHeight,highlightLineColor);<span class="hljs-keyword">this</span>.highlightLineId=highlightLine.id;target.insertAfterShape(<span class="hljs-keyword">this</span>.lastShapeId,highlightLine)}},<span class="hljs-attr">removeHighlight</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> target=<span class="hljs-keyword">this</span>.target;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.highlightSpotId){target.removeShapeId(<span class="hljs-keyword">this</span>.highlightSpotId);<span class="hljs-keyword">this</span>.highlightSpotId=<span class="hljs-literal">null</span>}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.highlightLineId){target.removeShapeId(<span class="hljs-keyword">this</span>.highlightLineId);<span class="hljs-keyword">this</span>.highlightLineId=<span class="hljs-literal">null</span>}},<span class="hljs-attr">scanValues</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> values=<span class="hljs-keyword">this</span>.values,valcount=values.length,xvalues=<span class="hljs-keyword">this</span>.xvalues,yvalues=<span class="hljs-keyword">this</span>.yvalues,yminmax=<span class="hljs-keyword">this</span>.yminmax,i,val,isStr,isArray,sp;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;valcount;i++){val=values[i];isStr=<span class="hljs-keyword">typeof</span> values[i]===<span class="hljs-string">"string"</span>;isArray=<span class="hljs-keyword">typeof</span> values[i]===<span class="hljs-string">"object"</span>&amp;&amp;values[i]<span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>;sp=isStr&amp;&amp;values[i].split(<span class="hljs-string">":"</span>);<span class="hljs-keyword">if</span>(isStr&amp;&amp;sp.length===<span class="hljs-number">2</span>){xvalues.push(<span class="hljs-built_in">Number</span>(sp[<span class="hljs-number">0</span>]));yvalues.push(<span class="hljs-built_in">Number</span>(sp[<span class="hljs-number">1</span>]));yminmax.push(<span class="hljs-built_in">Number</span>(sp[<span class="hljs-number">1</span>]))}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(isArray){xvalues.push(val[<span class="hljs-number">0</span>]);yvalues.push(val[<span class="hljs-number">1</span>]);yminmax.push(val[<span class="hljs-number">1</span>])}<span class="hljs-keyword">else</span>{xvalues.push(i);<span class="hljs-keyword">if</span>(values[i]===<span class="hljs-literal">null</span>||values[i]===<span class="hljs-string">"null"</span>){yvalues.push(<span class="hljs-literal">null</span>)}<span class="hljs-keyword">else</span>{yvalues.push(<span class="hljs-built_in">Number</span>(val));yminmax.push(<span class="hljs-built_in">Number</span>(val))}}}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"xvalues"</span>)){xvalues=<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"xvalues"</span>)}<span class="hljs-keyword">this</span>.maxy=<span class="hljs-keyword">this</span>.maxyorg=<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,yminmax);<span class="hljs-keyword">this</span>.miny=<span class="hljs-keyword">this</span>.minyorg=<span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>,yminmax);<span class="hljs-keyword">this</span>.maxx=<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,xvalues);<span class="hljs-keyword">this</span>.minx=<span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>,xvalues);<span class="hljs-keyword">this</span>.xvalues=xvalues;<span class="hljs-keyword">this</span>.yvalues=yvalues;<span class="hljs-keyword">this</span>.yminmax=yminmax},<span class="hljs-attr">processRangeOptions</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> options=<span class="hljs-keyword">this</span>.options,normalRangeMin=options.get(<span class="hljs-string">"normalRangeMin"</span>),normalRangeMax=options.get(<span class="hljs-string">"normalRangeMax"</span>);<span class="hljs-keyword">if</span>(normalRangeMin!==<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">if</span>(normalRangeMin&lt;<span class="hljs-keyword">this</span>.miny){<span class="hljs-keyword">this</span>.miny=normalRangeMin}<span class="hljs-keyword">if</span>(normalRangeMax&gt;<span class="hljs-keyword">this</span>.maxy){<span class="hljs-keyword">this</span>.maxy=normalRangeMax}}<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"chartRangeMin"</span>)!==<span class="hljs-literal">undefined</span>&amp;&amp;(options.get(<span class="hljs-string">"chartRangeClip"</span>)||options.get(<span class="hljs-string">"chartRangeMin"</span>)&lt;<span class="hljs-keyword">this</span>.miny)){<span class="hljs-keyword">this</span>.miny=options.get(<span class="hljs-string">"chartRangeMin"</span>)}<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"chartRangeMax"</span>)!==<span class="hljs-literal">undefined</span>&amp;&amp;(options.get(<span class="hljs-string">"chartRangeClip"</span>)||options.get(<span class="hljs-string">"chartRangeMax"</span>)&gt;<span class="hljs-keyword">this</span>.maxy)){<span class="hljs-keyword">this</span>.maxy=options.get(<span class="hljs-string">"chartRangeMax"</span>)}<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"chartRangeMinX"</span>)!==<span class="hljs-literal">undefined</span>&amp;&amp;(options.get(<span class="hljs-string">"chartRangeClipX"</span>)||options.get(<span class="hljs-string">"chartRangeMinX"</span>)&lt;<span class="hljs-keyword">this</span>.minx)){<span class="hljs-keyword">this</span>.minx=options.get(<span class="hljs-string">"chartRangeMinX"</span>)}<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"chartRangeMaxX"</span>)!==<span class="hljs-literal">undefined</span>&amp;&amp;(options.get(<span class="hljs-string">"chartRangeClipX"</span>)||options.get(<span class="hljs-string">"chartRangeMaxX"</span>)&gt;<span class="hljs-keyword">this</span>.maxx)){<span class="hljs-keyword">this</span>.maxx=options.get(<span class="hljs-string">"chartRangeMaxX"</span>)}},<span class="hljs-attr">drawNormalRange</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">canvasLeft,canvasTop,canvasHeight,canvasWidth,rangey</span>)</span>{<span class="hljs-keyword">var</span> normalRangeMin=<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"normalRangeMin"</span>),normalRangeMax=<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"normalRangeMax"</span>),ytop=canvasTop+<span class="hljs-built_in">Math</span>.round(canvasHeight-canvasHeight*((normalRangeMax-<span class="hljs-keyword">this</span>.miny)/rangey)),height=<span class="hljs-built_in">Math</span>.round(canvasHeight*(normalRangeMax-normalRangeMin)/rangey);<span class="hljs-keyword">this</span>.target.drawRect(canvasLeft,ytop,canvasWidth,height,<span class="hljs-literal">undefined</span>,<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"normalRangeColor"</span>)).append()},<span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> options=<span class="hljs-keyword">this</span>.options,target=<span class="hljs-keyword">this</span>.target,canvasWidth=<span class="hljs-keyword">this</span>.canvasWidth,canvasHeight=<span class="hljs-keyword">this</span>.canvasHeight,vertices=<span class="hljs-keyword">this</span>.vertices,spotRadius=options.get(<span class="hljs-string">"spotRadius"</span>),regionMap=<span class="hljs-keyword">this</span>.regionMap,rangex,rangey,yvallast,canvasTop,canvasLeft,vertex,path,paths,x,y,xnext,xpos,xposnext,last,next,yvalcount,lineShapes,fillShapes,plen,valueSpots,hlSpotsEnabled,color,xvalues,yvalues,i;<span class="hljs-keyword">if</span>(!line._super.render.call(<span class="hljs-keyword">this</span>)){<span class="hljs-keyword">return</span>}<span class="hljs-keyword">this</span>.scanValues();<span class="hljs-keyword">this</span>.processRangeOptions();xvalues=<span class="hljs-keyword">this</span>.xvalues;yvalues=<span class="hljs-keyword">this</span>.yvalues;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.yminmax.length||<span class="hljs-keyword">this</span>.yvalues.length&lt;<span class="hljs-number">2</span>){<span class="hljs-keyword">return</span>}canvasTop=canvasLeft=<span class="hljs-number">0</span>;rangex=<span class="hljs-keyword">this</span>.maxx-<span class="hljs-keyword">this</span>.minx===<span class="hljs-number">0</span>?<span class="hljs-number">1</span>:<span class="hljs-keyword">this</span>.maxx-<span class="hljs-keyword">this</span>.minx;rangey=<span class="hljs-keyword">this</span>.maxy-<span class="hljs-keyword">this</span>.miny===<span class="hljs-number">0</span>?<span class="hljs-number">1</span>:<span class="hljs-keyword">this</span>.maxy-<span class="hljs-keyword">this</span>.miny;yvallast=<span class="hljs-keyword">this</span>.yvalues.length<span class="hljs-number">-1</span>;<span class="hljs-keyword">if</span>(spotRadius&amp;&amp;(canvasWidth&lt;spotRadius*<span class="hljs-number">4</span>||canvasHeight&lt;spotRadius*<span class="hljs-number">4</span>)){spotRadius=<span class="hljs-number">0</span>}<span class="hljs-keyword">if</span>(spotRadius){hlSpotsEnabled=options.get(<span class="hljs-string">"highlightSpotColor"</span>)&amp;&amp;!options.get(<span class="hljs-string">"disableInteraction"</span>);<span class="hljs-keyword">if</span>(hlSpotsEnabled||options.get(<span class="hljs-string">"minSpotColor"</span>)||options.get(<span class="hljs-string">"spotColor"</span>)&amp;&amp;yvalues[yvallast]===<span class="hljs-keyword">this</span>.miny){canvasHeight-=<span class="hljs-built_in">Math</span>.ceil(spotRadius)}<span class="hljs-keyword">if</span>(hlSpotsEnabled||options.get(<span class="hljs-string">"maxSpotColor"</span>)||options.get(<span class="hljs-string">"spotColor"</span>)&amp;&amp;yvalues[yvallast]===<span class="hljs-keyword">this</span>.maxy){canvasHeight-=<span class="hljs-built_in">Math</span>.ceil(spotRadius);canvasTop+=<span class="hljs-built_in">Math</span>.ceil(spotRadius)}<span class="hljs-keyword">if</span>(hlSpotsEnabled||(options.get(<span class="hljs-string">"minSpotColor"</span>)||options.get(<span class="hljs-string">"maxSpotColor"</span>))&amp;&amp;(yvalues[<span class="hljs-number">0</span>]===<span class="hljs-keyword">this</span>.miny||yvalues[<span class="hljs-number">0</span>]===<span class="hljs-keyword">this</span>.maxy)){canvasLeft+=<span class="hljs-built_in">Math</span>.ceil(spotRadius);canvasWidth-=<span class="hljs-built_in">Math</span>.ceil(spotRadius)}<span class="hljs-keyword">if</span>(hlSpotsEnabled||options.get(<span class="hljs-string">"spotColor"</span>)||(options.get(<span class="hljs-string">"minSpotColor"</span>)||options.get(<span class="hljs-string">"maxSpotColor"</span>)&amp;&amp;(yvalues[yvallast]===<span class="hljs-keyword">this</span>.miny||yvalues[yvallast]===<span class="hljs-keyword">this</span>.maxy))){canvasWidth-=<span class="hljs-built_in">Math</span>.ceil(spotRadius)}}canvasHeight--;<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"normalRangeMin"</span>)!==<span class="hljs-literal">undefined</span>&amp;&amp;!options.get(<span class="hljs-string">"drawNormalOnTop"</span>)){<span class="hljs-keyword">this</span>.drawNormalRange(canvasLeft,canvasTop,canvasHeight,canvasWidth,rangey)}path=[];paths=[path];last=next=<span class="hljs-literal">null</span>;yvalcount=yvalues.length;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;yvalcount;i++){x=xvalues[i];xnext=xvalues[i+<span class="hljs-number">1</span>];y=yvalues[i];xpos=canvasLeft+<span class="hljs-built_in">Math</span>.round((x-<span class="hljs-keyword">this</span>.minx)*(canvasWidth/rangex));xposnext=i&lt;yvalcount<span class="hljs-number">-1</span>?canvasLeft+<span class="hljs-built_in">Math</span>.round((xnext-<span class="hljs-keyword">this</span>.minx)*(canvasWidth/rangex)):canvasWidth;next=xpos+(xposnext-xpos)/<span class="hljs-number">2</span>;regionMap[i]=[last||<span class="hljs-number">0</span>,next,i];last=next;<span class="hljs-keyword">if</span>(y===<span class="hljs-literal">null</span>){<span class="hljs-keyword">if</span>(i){<span class="hljs-keyword">if</span>(yvalues[i<span class="hljs-number">-1</span>]!==<span class="hljs-literal">null</span>){path=[];paths.push(path)}vertices.push(<span class="hljs-literal">null</span>)}}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(y&lt;<span class="hljs-keyword">this</span>.miny){y=<span class="hljs-keyword">this</span>.miny}<span class="hljs-keyword">if</span>(y&gt;<span class="hljs-keyword">this</span>.maxy){y=<span class="hljs-keyword">this</span>.maxy}<span class="hljs-keyword">if</span>(!path.length){path.push([xpos,canvasTop+canvasHeight])}vertex=[xpos,canvasTop+<span class="hljs-built_in">Math</span>.round(canvasHeight-canvasHeight*((y-<span class="hljs-keyword">this</span>.miny)/rangey))];path.push(vertex);vertices.push(vertex)}}lineShapes=[];fillShapes=[];plen=paths.length;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;plen;i++){path=paths[i];<span class="hljs-keyword">if</span>(path.length){<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"fillColor"</span>)){path.push([path[path.length<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>],canvasTop+canvasHeight]);fillShapes.push(path.slice(<span class="hljs-number">0</span>));path.pop()}<span class="hljs-keyword">if</span>(path.length&gt;<span class="hljs-number">2</span>){path[<span class="hljs-number">0</span>]=[path[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>],path[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]]}lineShapes.push(path)}}plen=fillShapes.length;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;plen;i++){target.drawShape(fillShapes[i],options.get(<span class="hljs-string">"fillColor"</span>),options.get(<span class="hljs-string">"fillColor"</span>)).append()}<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"normalRangeMin"</span>)!==<span class="hljs-literal">undefined</span>&amp;&amp;options.get(<span class="hljs-string">"drawNormalOnTop"</span>)){<span class="hljs-keyword">this</span>.drawNormalRange(canvasLeft,canvasTop,canvasHeight,canvasWidth,rangey)}plen=lineShapes.length;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;plen;i++){target.drawShape(lineShapes[i],options.get(<span class="hljs-string">"lineColor"</span>),<span class="hljs-literal">undefined</span>,options.get(<span class="hljs-string">"lineWidth"</span>)).append()}<span class="hljs-keyword">if</span>(spotRadius&amp;&amp;options.get(<span class="hljs-string">"valueSpots"</span>)){valueSpots=options.get(<span class="hljs-string">"valueSpots"</span>);<span class="hljs-keyword">if</span>(valueSpots.get===<span class="hljs-literal">undefined</span>){valueSpots=<span class="hljs-keyword">new</span> RangeMap(valueSpots)}<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;yvalcount;i++){color=valueSpots.get(yvalues[i]);<span class="hljs-keyword">if</span>(color){target.drawCircle(canvasLeft+<span class="hljs-built_in">Math</span>.round((xvalues[i]-<span class="hljs-keyword">this</span>.minx)*(canvasWidth/rangex)),canvasTop+<span class="hljs-built_in">Math</span>.round(canvasHeight-canvasHeight*((yvalues[i]-<span class="hljs-keyword">this</span>.miny)/rangey)),spotRadius,<span class="hljs-literal">undefined</span>,color).append()}}}<span class="hljs-keyword">if</span>(spotRadius&amp;&amp;options.get(<span class="hljs-string">"spotColor"</span>)&amp;&amp;yvalues[yvallast]!==<span class="hljs-literal">null</span>){target.drawCircle(canvasLeft+<span class="hljs-built_in">Math</span>.round((xvalues[xvalues.length<span class="hljs-number">-1</span>]-<span class="hljs-keyword">this</span>.minx)*(canvasWidth/rangex)),canvasTop+<span class="hljs-built_in">Math</span>.round(canvasHeight-canvasHeight*((yvalues[yvallast]-<span class="hljs-keyword">this</span>.miny)/rangey)),spotRadius,<span class="hljs-literal">undefined</span>,options.get(<span class="hljs-string">"spotColor"</span>)).append()}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.maxy!==<span class="hljs-keyword">this</span>.minyorg){<span class="hljs-keyword">if</span>(spotRadius&amp;&amp;options.get(<span class="hljs-string">"minSpotColor"</span>)){x=xvalues[$.inArray(<span class="hljs-keyword">this</span>.minyorg,yvalues)];target.drawCircle(canvasLeft+<span class="hljs-built_in">Math</span>.round((x-<span class="hljs-keyword">this</span>.minx)*(canvasWidth/rangex)),canvasTop+<span class="hljs-built_in">Math</span>.round(canvasHeight-canvasHeight*((<span class="hljs-keyword">this</span>.minyorg-<span class="hljs-keyword">this</span>.miny)/rangey)),spotRadius,<span class="hljs-literal">undefined</span>,options.get(<span class="hljs-string">"minSpotColor"</span>)).append()}<span class="hljs-keyword">if</span>(spotRadius&amp;&amp;options.get(<span class="hljs-string">"maxSpotColor"</span>)){x=xvalues[$.inArray(<span class="hljs-keyword">this</span>.maxyorg,yvalues)];target.drawCircle(canvasLeft+<span class="hljs-built_in">Math</span>.round((x-<span class="hljs-keyword">this</span>.minx)*(canvasWidth/rangex)),canvasTop+<span class="hljs-built_in">Math</span>.round(canvasHeight-canvasHeight*((<span class="hljs-keyword">this</span>.maxyorg-<span class="hljs-keyword">this</span>.miny)/rangey)),spotRadius,<span class="hljs-literal">undefined</span>,options.get(<span class="hljs-string">"maxSpotColor"</span>)).append()}}<span class="hljs-keyword">this</span>.lastShapeId=target.getLastShapeId();<span class="hljs-keyword">this</span>.canvasTop=canvasTop;target.render()}});$.fn.sparkline.bar=bar=createClass($.fn.sparkline._base,barHighlightMixin,{<span class="hljs-attr">type</span>:<span class="hljs-string">"bar"</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,values,options,width,height</span>)</span>{<span class="hljs-keyword">var</span> barWidth=<span class="hljs-built_in">parseInt</span>(options.get(<span class="hljs-string">"barWidth"</span>),<span class="hljs-number">10</span>),barSpacing=<span class="hljs-built_in">parseInt</span>(options.get(<span class="hljs-string">"barSpacing"</span>),<span class="hljs-number">10</span>),chartRangeMin=options.get(<span class="hljs-string">"chartRangeMin"</span>),chartRangeMax=options.get(<span class="hljs-string">"chartRangeMax"</span>),chartRangeClip=options.get(<span class="hljs-string">"chartRangeClip"</span>),stackMin=<span class="hljs-literal">Infinity</span>,stackMax=-<span class="hljs-literal">Infinity</span>,isStackString,groupMin,groupMax,stackRanges,numValues,i,vlen,range,zeroAxis,xaxisOffset,min,max,clipMin,clipMax,stacked,vlist,j,slen,svals,val,yoffset,yMaxCalc,canvasHeightEf;bar._super.init.call(<span class="hljs-keyword">this</span>,el,values,options,width,height);<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>,vlen=values.length;i&lt;vlen;i++){val=values[i];isStackString=<span class="hljs-keyword">typeof</span> val===<span class="hljs-string">"string"</span>&amp;&amp;val.indexOf(<span class="hljs-string">":"</span>)&gt;<span class="hljs-number">-1</span>;<span class="hljs-keyword">if</span>(isStackString||$.isArray(val)){stacked=<span class="hljs-literal">true</span>;<span class="hljs-keyword">if</span>(isStackString){val=values[i]=normalizeValues(val.split(<span class="hljs-string">":"</span>));
}val=remove(val,<span class="hljs-literal">null</span>);groupMin=<span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>,val);groupMax=<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,val);<span class="hljs-keyword">if</span>(groupMin&lt;stackMin){stackMin=groupMin}<span class="hljs-keyword">if</span>(groupMax&gt;stackMax){stackMax=groupMax}}}<span class="hljs-keyword">this</span>.stacked=stacked;<span class="hljs-keyword">this</span>.regionShapes={};<span class="hljs-keyword">this</span>.barWidth=barWidth;<span class="hljs-keyword">this</span>.barSpacing=barSpacing;<span class="hljs-keyword">this</span>.totalBarWidth=barWidth+barSpacing;<span class="hljs-keyword">this</span>.width=width=values.length*barWidth+(values.length<span class="hljs-number">-1</span>)*barSpacing;<span class="hljs-keyword">this</span>.initTarget();<span class="hljs-keyword">if</span>(chartRangeClip){clipMin=chartRangeMin===<span class="hljs-literal">undefined</span>?-<span class="hljs-literal">Infinity</span>:chartRangeMin;clipMax=chartRangeMax===<span class="hljs-literal">undefined</span>?<span class="hljs-literal">Infinity</span>:chartRangeMax}numValues=[];stackRanges=stacked?[]:numValues;<span class="hljs-keyword">var</span> stackTotals=[];<span class="hljs-keyword">var</span> stackRangesNeg=[];<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>,vlen=values.length;i&lt;vlen;i++){<span class="hljs-keyword">if</span>(stacked){vlist=values[i];values[i]=svals=[];stackTotals[i]=<span class="hljs-number">0</span>;stackRanges[i]=stackRangesNeg[i]=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>,slen=vlist.length;j&lt;slen;j++){val=svals[j]=chartRangeClip?clipval(vlist[j],clipMin,clipMax):vlist[j];<span class="hljs-keyword">if</span>(val!==<span class="hljs-literal">null</span>){<span class="hljs-keyword">if</span>(val&gt;<span class="hljs-number">0</span>){stackTotals[i]+=val}<span class="hljs-keyword">if</span>(stackMin&lt;<span class="hljs-number">0</span>&amp;&amp;stackMax&gt;<span class="hljs-number">0</span>){<span class="hljs-keyword">if</span>(val&lt;<span class="hljs-number">0</span>){stackRangesNeg[i]+=<span class="hljs-built_in">Math</span>.abs(val)}<span class="hljs-keyword">else</span>{stackRanges[i]+=val}}<span class="hljs-keyword">else</span>{stackRanges[i]+=<span class="hljs-built_in">Math</span>.abs(val-(val&lt;<span class="hljs-number">0</span>?stackMax:stackMin))}numValues.push(val)}}}<span class="hljs-keyword">else</span>{val=chartRangeClip?clipval(values[i],clipMin,clipMax):values[i];val=values[i]=normalizeValue(val);<span class="hljs-keyword">if</span>(val!==<span class="hljs-literal">null</span>){numValues.push(val)}}}<span class="hljs-keyword">this</span>.max=max=<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,numValues);<span class="hljs-keyword">this</span>.min=min=<span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>,numValues);<span class="hljs-keyword">this</span>.stackMax=stackMax=stacked?<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,stackTotals):max;<span class="hljs-keyword">this</span>.stackMin=stackMin=stacked?<span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>,numValues):min;<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"chartRangeMin"</span>)!==<span class="hljs-literal">undefined</span>&amp;&amp;(options.get(<span class="hljs-string">"chartRangeClip"</span>)||options.get(<span class="hljs-string">"chartRangeMin"</span>)&lt;min)){min=options.get(<span class="hljs-string">"chartRangeMin"</span>)}<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"chartRangeMax"</span>)!==<span class="hljs-literal">undefined</span>&amp;&amp;(options.get(<span class="hljs-string">"chartRangeClip"</span>)||options.get(<span class="hljs-string">"chartRangeMax"</span>)&gt;max)){max=options.get(<span class="hljs-string">"chartRangeMax"</span>)}<span class="hljs-keyword">this</span>.zeroAxis=zeroAxis=options.get(<span class="hljs-string">"zeroAxis"</span>,<span class="hljs-literal">true</span>);<span class="hljs-keyword">if</span>(min&lt;=<span class="hljs-number">0</span>&amp;&amp;max&gt;=<span class="hljs-number">0</span>&amp;&amp;zeroAxis){xaxisOffset=<span class="hljs-number">0</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(zeroAxis==<span class="hljs-literal">false</span>){xaxisOffset=min}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(min&gt;<span class="hljs-number">0</span>){xaxisOffset=min}<span class="hljs-keyword">else</span>{xaxisOffset=max}<span class="hljs-keyword">this</span>.xaxisOffset=xaxisOffset;range=stacked?<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,stackRanges)+<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,stackRangesNeg):max-min;<span class="hljs-keyword">this</span>.canvasHeightEf=zeroAxis&amp;&amp;min&lt;<span class="hljs-number">0</span>?<span class="hljs-keyword">this</span>.canvasHeight<span class="hljs-number">-2</span>:<span class="hljs-keyword">this</span>.canvasHeight<span class="hljs-number">-1</span>;<span class="hljs-keyword">if</span>(min&lt;xaxisOffset){yMaxCalc=stacked&amp;&amp;max&gt;=<span class="hljs-number">0</span>?stackMax:max;yoffset=(yMaxCalc-xaxisOffset)/range*<span class="hljs-keyword">this</span>.canvasHeight;<span class="hljs-keyword">if</span>(yoffset!==<span class="hljs-built_in">Math</span>.ceil(yoffset)){<span class="hljs-keyword">this</span>.canvasHeightEf-=<span class="hljs-number">2</span>;yoffset=<span class="hljs-built_in">Math</span>.ceil(yoffset)}}<span class="hljs-keyword">else</span>{yoffset=<span class="hljs-keyword">this</span>.canvasHeight}<span class="hljs-keyword">this</span>.yoffset=yoffset;<span class="hljs-keyword">if</span>($.isArray(options.get(<span class="hljs-string">"colorMap"</span>))){<span class="hljs-keyword">this</span>.colorMapByIndex=options.get(<span class="hljs-string">"colorMap"</span>);<span class="hljs-keyword">this</span>.colorMapByValue=<span class="hljs-literal">null</span>}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">this</span>.colorMapByIndex=<span class="hljs-literal">null</span>;<span class="hljs-keyword">this</span>.colorMapByValue=options.get(<span class="hljs-string">"colorMap"</span>);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.colorMapByValue&amp;&amp;<span class="hljs-keyword">this</span>.colorMapByValue.get===<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">this</span>.colorMapByValue=<span class="hljs-keyword">new</span> RangeMap(<span class="hljs-keyword">this</span>.colorMapByValue)}}<span class="hljs-keyword">this</span>.range=range},<span class="hljs-attr">getRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,x,y</span>)</span>{<span class="hljs-keyword">var</span> result=<span class="hljs-built_in">Math</span>.floor(x/<span class="hljs-keyword">this</span>.totalBarWidth);<span class="hljs-keyword">return</span> result&lt;<span class="hljs-number">0</span>||result&gt;=<span class="hljs-keyword">this</span>.values.length?<span class="hljs-literal">undefined</span>:result},<span class="hljs-attr">getCurrentRegionFields</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion,values=ensureArray(<span class="hljs-keyword">this</span>.values[currentRegion]),result=[],value,i;<span class="hljs-keyword">for</span>(i=values.length;i--;){value=values[i];result.push({<span class="hljs-attr">isNull</span>:value===<span class="hljs-literal">null</span>,<span class="hljs-attr">value</span>:value,<span class="hljs-attr">color</span>:<span class="hljs-keyword">this</span>.calcColor(i,value,currentRegion),<span class="hljs-attr">offset</span>:currentRegion})}<span class="hljs-keyword">return</span> result},<span class="hljs-attr">calcColor</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">stacknum,value,valuenum</span>)</span>{<span class="hljs-keyword">var</span> colorMapByIndex=<span class="hljs-keyword">this</span>.colorMapByIndex,colorMapByValue=<span class="hljs-keyword">this</span>.colorMapByValue,options=<span class="hljs-keyword">this</span>.options,color,newColor;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.stacked){color=options.get(<span class="hljs-string">"stackedBarColor"</span>)}<span class="hljs-keyword">else</span>{color=value&lt;<span class="hljs-number">0</span>?options.get(<span class="hljs-string">"negBarColor"</span>):options.get(<span class="hljs-string">"barColor"</span>)}<span class="hljs-keyword">if</span>(value===<span class="hljs-number">0</span>&amp;&amp;options.get(<span class="hljs-string">"zeroColor"</span>)!==<span class="hljs-literal">undefined</span>){color=options.get(<span class="hljs-string">"zeroColor"</span>)}<span class="hljs-keyword">if</span>(colorMapByValue&amp;&amp;(newColor=colorMapByValue.get(value))){color=newColor}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(colorMapByIndex&amp;&amp;colorMapByIndex.length&gt;valuenum){color=colorMapByIndex[valuenum]}<span class="hljs-keyword">return</span> $.isArray(color)?color[stacknum%color.length]:color},<span class="hljs-attr">renderRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">valuenum,highlight</span>)</span>{<span class="hljs-keyword">var</span> vals=<span class="hljs-keyword">this</span>.values[valuenum],options=<span class="hljs-keyword">this</span>.options,xaxisOffset=<span class="hljs-keyword">this</span>.xaxisOffset,result=[],range=<span class="hljs-keyword">this</span>.range,stacked=<span class="hljs-keyword">this</span>.stacked,target=<span class="hljs-keyword">this</span>.target,x=valuenum*<span class="hljs-keyword">this</span>.totalBarWidth,canvasHeightEf=<span class="hljs-keyword">this</span>.canvasHeightEf,yoffset=<span class="hljs-keyword">this</span>.yoffset,y,height,color,isNull,yoffsetNeg,i,valcount,val,minPlotted,allMin;vals=$.isArray(vals)?vals:[vals];valcount=vals.length;val=vals[<span class="hljs-number">0</span>];isNull=all(<span class="hljs-literal">null</span>,vals);allMin=all(xaxisOffset,vals,<span class="hljs-literal">true</span>);<span class="hljs-keyword">if</span>(isNull){<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"nullColor"</span>)){color=highlight?options.get(<span class="hljs-string">"nullColor"</span>):<span class="hljs-keyword">this</span>.calcHighlightColor(options.get(<span class="hljs-string">"nullColor"</span>),options);y=yoffset&gt;<span class="hljs-number">0</span>?yoffset<span class="hljs-number">-1</span>:yoffset;<span class="hljs-keyword">return</span> target.drawRect(x,y,<span class="hljs-keyword">this</span>.barWidth<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>,color,color)}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>}}yoffsetNeg=yoffset;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;valcount;i++){val=vals[i];<span class="hljs-keyword">if</span>(stacked&amp;&amp;val===xaxisOffset){<span class="hljs-keyword">if</span>(!allMin||minPlotted){<span class="hljs-keyword">continue</span>}minPlotted=<span class="hljs-literal">true</span>}<span class="hljs-keyword">if</span>(range&gt;<span class="hljs-number">0</span>){height=<span class="hljs-built_in">Math</span>.floor(canvasHeightEf*(<span class="hljs-built_in">Math</span>.abs(val-xaxisOffset)/range))+<span class="hljs-number">1</span>}<span class="hljs-keyword">else</span>{height=<span class="hljs-number">1</span>}<span class="hljs-keyword">if</span>(val&lt;xaxisOffset||val===xaxisOffset&amp;&amp;yoffset===<span class="hljs-number">0</span>){y=yoffsetNeg;yoffsetNeg+=height}<span class="hljs-keyword">else</span>{y=yoffset-height;yoffset-=height}color=<span class="hljs-keyword">this</span>.calcColor(i,val,valuenum);<span class="hljs-keyword">if</span>(highlight){color=<span class="hljs-keyword">this</span>.calcHighlightColor(color,options)}result.push(target.drawRect(x,y,<span class="hljs-keyword">this</span>.barWidth<span class="hljs-number">-1</span>,height<span class="hljs-number">-1</span>,color,color))}<span class="hljs-keyword">if</span>(result.length===<span class="hljs-number">1</span>){<span class="hljs-keyword">return</span> result[<span class="hljs-number">0</span>]}<span class="hljs-keyword">return</span> result}});$.fn.sparkline.tristate=tristate=createClass($.fn.sparkline._base,barHighlightMixin,{<span class="hljs-attr">type</span>:<span class="hljs-string">"tristate"</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,values,options,width,height</span>)</span>{<span class="hljs-keyword">var</span> barWidth=<span class="hljs-built_in">parseInt</span>(options.get(<span class="hljs-string">"barWidth"</span>),<span class="hljs-number">10</span>),barSpacing=<span class="hljs-built_in">parseInt</span>(options.get(<span class="hljs-string">"barSpacing"</span>),<span class="hljs-number">10</span>);tristate._super.init.call(<span class="hljs-keyword">this</span>,el,values,options,width,height);<span class="hljs-keyword">this</span>.regionShapes={};<span class="hljs-keyword">this</span>.barWidth=barWidth;<span class="hljs-keyword">this</span>.barSpacing=barSpacing;<span class="hljs-keyword">this</span>.totalBarWidth=barWidth+barSpacing;<span class="hljs-keyword">this</span>.values=$.map(values,<span class="hljs-built_in">Number</span>);<span class="hljs-keyword">this</span>.width=width=values.length*barWidth+(values.length<span class="hljs-number">-1</span>)*barSpacing;<span class="hljs-keyword">if</span>($.isArray(options.get(<span class="hljs-string">"colorMap"</span>))){<span class="hljs-keyword">this</span>.colorMapByIndex=options.get(<span class="hljs-string">"colorMap"</span>);<span class="hljs-keyword">this</span>.colorMapByValue=<span class="hljs-literal">null</span>}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">this</span>.colorMapByIndex=<span class="hljs-literal">null</span>;<span class="hljs-keyword">this</span>.colorMapByValue=options.get(<span class="hljs-string">"colorMap"</span>);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.colorMapByValue&amp;&amp;<span class="hljs-keyword">this</span>.colorMapByValue.get===<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">this</span>.colorMapByValue=<span class="hljs-keyword">new</span> RangeMap(<span class="hljs-keyword">this</span>.colorMapByValue)}}<span class="hljs-keyword">this</span>.initTarget()},<span class="hljs-attr">getRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,x,y</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(x/<span class="hljs-keyword">this</span>.totalBarWidth)},<span class="hljs-attr">getCurrentRegionFields</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion;<span class="hljs-keyword">return</span>{<span class="hljs-attr">isNull</span>:<span class="hljs-keyword">this</span>.values[currentRegion]===<span class="hljs-literal">undefined</span>,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.values[currentRegion],<span class="hljs-attr">color</span>:<span class="hljs-keyword">this</span>.calcColor(<span class="hljs-keyword">this</span>.values[currentRegion],currentRegion),<span class="hljs-attr">offset</span>:currentRegion}},<span class="hljs-attr">calcColor</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value,valuenum</span>)</span>{<span class="hljs-keyword">var</span> values=<span class="hljs-keyword">this</span>.values,options=<span class="hljs-keyword">this</span>.options,colorMapByIndex=<span class="hljs-keyword">this</span>.colorMapByIndex,colorMapByValue=<span class="hljs-keyword">this</span>.colorMapByValue,color,newColor;<span class="hljs-keyword">if</span>(colorMapByValue&amp;&amp;(newColor=colorMapByValue.get(value))){color=newColor}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(colorMapByIndex&amp;&amp;colorMapByIndex.length&gt;valuenum){color=colorMapByIndex[valuenum]}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(values[valuenum]&lt;<span class="hljs-number">0</span>){color=options.get(<span class="hljs-string">"negBarColor"</span>)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(values[valuenum]&gt;<span class="hljs-number">0</span>){color=options.get(<span class="hljs-string">"posBarColor"</span>)}<span class="hljs-keyword">else</span>{color=options.get(<span class="hljs-string">"zeroBarColor"</span>)}<span class="hljs-keyword">return</span> color},<span class="hljs-attr">renderRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">valuenum,highlight</span>)</span>{<span class="hljs-keyword">var</span> values=<span class="hljs-keyword">this</span>.values,options=<span class="hljs-keyword">this</span>.options,target=<span class="hljs-keyword">this</span>.target,canvasHeight,height,halfHeight,x,y,color;canvasHeight=target.pixelHeight;halfHeight=<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">2</span>);x=valuenum*<span class="hljs-keyword">this</span>.totalBarWidth;<span class="hljs-keyword">if</span>(values[valuenum]&lt;<span class="hljs-number">0</span>){y=halfHeight;height=halfHeight<span class="hljs-number">-1</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(values[valuenum]&gt;<span class="hljs-number">0</span>){y=<span class="hljs-number">0</span>;height=halfHeight<span class="hljs-number">-1</span>}<span class="hljs-keyword">else</span>{y=halfHeight<span class="hljs-number">-1</span>;height=<span class="hljs-number">2</span>}color=<span class="hljs-keyword">this</span>.calcColor(values[valuenum],valuenum);<span class="hljs-keyword">if</span>(color===<span class="hljs-literal">null</span>){<span class="hljs-keyword">return</span>}<span class="hljs-keyword">if</span>(highlight){color=<span class="hljs-keyword">this</span>.calcHighlightColor(color,options)}<span class="hljs-keyword">return</span> target.drawRect(x,y,<span class="hljs-keyword">this</span>.barWidth<span class="hljs-number">-1</span>,height<span class="hljs-number">-1</span>,color,color)}});$.fn.sparkline.discrete=discrete=createClass($.fn.sparkline._base,barHighlightMixin,{<span class="hljs-attr">type</span>:<span class="hljs-string">"discrete"</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,values,options,width,height</span>)</span>{discrete._super.init.call(<span class="hljs-keyword">this</span>,el,values,options,width,height);<span class="hljs-keyword">this</span>.regionShapes={};<span class="hljs-keyword">this</span>.values=values=$.map(values,<span class="hljs-built_in">Number</span>);<span class="hljs-keyword">this</span>.min=<span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>,values);<span class="hljs-keyword">this</span>.max=<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,values);<span class="hljs-keyword">this</span>.range=<span class="hljs-keyword">this</span>.max-<span class="hljs-keyword">this</span>.min;<span class="hljs-keyword">this</span>.width=width=options.get(<span class="hljs-string">"width"</span>)===<span class="hljs-string">"auto"</span>?values.length*<span class="hljs-number">2</span>:<span class="hljs-keyword">this</span>.width;<span class="hljs-keyword">this</span>.interval=<span class="hljs-built_in">Math</span>.floor(width/values.length);<span class="hljs-keyword">this</span>.itemWidth=width/values.length;<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"chartRangeMin"</span>)!==<span class="hljs-literal">undefined</span>&amp;&amp;(options.get(<span class="hljs-string">"chartRangeClip"</span>)||options.get(<span class="hljs-string">"chartRangeMin"</span>)&lt;<span class="hljs-keyword">this</span>.min)){<span class="hljs-keyword">this</span>.min=options.get(<span class="hljs-string">"chartRangeMin"</span>)}<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"chartRangeMax"</span>)!==<span class="hljs-literal">undefined</span>&amp;&amp;(options.get(<span class="hljs-string">"chartRangeClip"</span>)||options.get(<span class="hljs-string">"chartRangeMax"</span>)&gt;<span class="hljs-keyword">this</span>.max)){<span class="hljs-keyword">this</span>.max=options.get(<span class="hljs-string">"chartRangeMax"</span>)}<span class="hljs-keyword">this</span>.initTarget();<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.target){<span class="hljs-keyword">this</span>.lineHeight=options.get(<span class="hljs-string">"lineHeight"</span>)===<span class="hljs-string">"auto"</span>?<span class="hljs-built_in">Math</span>.round(<span class="hljs-keyword">this</span>.canvasHeight*<span class="hljs-number">.3</span>):options.get(<span class="hljs-string">"lineHeight"</span>)}},<span class="hljs-attr">getRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,x,y</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(x/<span class="hljs-keyword">this</span>.itemWidth)},<span class="hljs-attr">getCurrentRegionFields</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion;<span class="hljs-keyword">return</span>{<span class="hljs-attr">isNull</span>:<span class="hljs-keyword">this</span>.values[currentRegion]===<span class="hljs-literal">undefined</span>,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.values[currentRegion],<span class="hljs-attr">offset</span>:currentRegion}},<span class="hljs-attr">renderRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">valuenum,highlight</span>)</span>{<span class="hljs-keyword">var</span> values=<span class="hljs-keyword">this</span>.values,options=<span class="hljs-keyword">this</span>.options,min=<span class="hljs-keyword">this</span>.min,max=<span class="hljs-keyword">this</span>.max,range=<span class="hljs-keyword">this</span>.range,interval=<span class="hljs-keyword">this</span>.interval,target=<span class="hljs-keyword">this</span>.target,canvasHeight=<span class="hljs-keyword">this</span>.canvasHeight,lineHeight=<span class="hljs-keyword">this</span>.lineHeight,pheight=canvasHeight-lineHeight,ytop,val,color,x;val=clipval(values[valuenum],min,max);x=valuenum*interval;ytop=<span class="hljs-built_in">Math</span>.round(pheight-pheight*((val-min)/range));color=options.get(<span class="hljs-string">"thresholdColor"</span>)&amp;&amp;val&lt;options.get(<span class="hljs-string">"thresholdValue"</span>)?options.get(<span class="hljs-string">"thresholdColor"</span>):options.get(<span class="hljs-string">"lineColor"</span>);<span class="hljs-keyword">if</span>(highlight){color=<span class="hljs-keyword">this</span>.calcHighlightColor(color,options)}<span class="hljs-keyword">return</span> target.drawLine(x,ytop,x,ytop+lineHeight,color)}});$.fn.sparkline.bullet=bullet=createClass($.fn.sparkline._base,{<span class="hljs-attr">type</span>:<span class="hljs-string">"bullet"</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,values,options,width,height</span>)</span>{<span class="hljs-keyword">var</span> min,max,vals;bullet._super.init.call(<span class="hljs-keyword">this</span>,el,values,options,width,height);<span class="hljs-keyword">this</span>.values=values=normalizeValues(values);vals=values.slice();vals[<span class="hljs-number">0</span>]=vals[<span class="hljs-number">0</span>]===<span class="hljs-literal">null</span>?vals[<span class="hljs-number">2</span>]:vals[<span class="hljs-number">0</span>];vals[<span class="hljs-number">1</span>]=values[<span class="hljs-number">1</span>]===<span class="hljs-literal">null</span>?vals[<span class="hljs-number">2</span>]:vals[<span class="hljs-number">1</span>];min=<span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>,values);max=<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,values);<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"base"</span>)===<span class="hljs-literal">undefined</span>){min=min&lt;<span class="hljs-number">0</span>?min:<span class="hljs-number">0</span>}<span class="hljs-keyword">else</span>{min=options.get(<span class="hljs-string">"base"</span>)}<span class="hljs-keyword">this</span>.min=min;<span class="hljs-keyword">this</span>.max=max;<span class="hljs-keyword">this</span>.range=max-min;<span class="hljs-keyword">this</span>.shapes={};<span class="hljs-keyword">this</span>.valueShapes={};<span class="hljs-keyword">this</span>.regiondata={};<span class="hljs-keyword">this</span>.width=width=options.get(<span class="hljs-string">"width"</span>)===<span class="hljs-string">"auto"</span>?<span class="hljs-string">"4.0em"</span>:width;<span class="hljs-keyword">this</span>.target=<span class="hljs-keyword">this</span>.$el.simpledraw(width,height,options.get(<span class="hljs-string">"composite"</span>));<span class="hljs-keyword">if</span>(!values.length){<span class="hljs-keyword">this</span>.disabled=<span class="hljs-literal">true</span>}<span class="hljs-keyword">this</span>.initTarget()},<span class="hljs-attr">getRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,x,y</span>)</span>{<span class="hljs-keyword">var</span> shapeid=<span class="hljs-keyword">this</span>.target.getShapeAt(el,x,y);<span class="hljs-keyword">return</span> shapeid!==<span class="hljs-literal">undefined</span>&amp;&amp;<span class="hljs-keyword">this</span>.shapes[shapeid]!==<span class="hljs-literal">undefined</span>?<span class="hljs-keyword">this</span>.shapes[shapeid]:<span class="hljs-literal">undefined</span>},<span class="hljs-attr">getCurrentRegionFields</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion;<span class="hljs-keyword">return</span>{<span class="hljs-attr">fieldkey</span>:currentRegion.substr(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>),<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.values[currentRegion.substr(<span class="hljs-number">1</span>)],<span class="hljs-attr">region</span>:currentRegion}},<span class="hljs-attr">changeHighlight</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">highlight</span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion,shapeid=<span class="hljs-keyword">this</span>.valueShapes[currentRegion],shape;<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.shapes[shapeid];<span class="hljs-keyword">switch</span>(currentRegion.substr(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)){<span class="hljs-keyword">case</span><span class="hljs-string">"r"</span>:shape=<span class="hljs-keyword">this</span>.renderRange(currentRegion.substr(<span class="hljs-number">1</span>),highlight);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"p"</span>:shape=<span class="hljs-keyword">this</span>.renderPerformance(highlight);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"t"</span>:shape=<span class="hljs-keyword">this</span>.renderTarget(highlight);<span class="hljs-keyword">break</span>}<span class="hljs-keyword">this</span>.valueShapes[currentRegion]=shape.id;<span class="hljs-keyword">this</span>.shapes[shape.id]=currentRegion;<span class="hljs-keyword">this</span>.target.replaceWithShape(shapeid,shape)},<span class="hljs-attr">renderRange</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rn,highlight</span>)</span>{<span class="hljs-keyword">var</span> rangeval=<span class="hljs-keyword">this</span>.values[rn],rangewidth=<span class="hljs-built_in">Math</span>.round(<span class="hljs-keyword">this</span>.canvasWidth*((rangeval-<span class="hljs-keyword">this</span>.min)/<span class="hljs-keyword">this</span>.range)),color=<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"rangeColors"</span>)[rn<span class="hljs-number">-2</span>];<span class="hljs-keyword">if</span>(highlight){color=<span class="hljs-keyword">this</span>.calcHighlightColor(color,<span class="hljs-keyword">this</span>.options)}<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.target.drawRect(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,rangewidth<span class="hljs-number">-1</span>,<span class="hljs-keyword">this</span>.canvasHeight<span class="hljs-number">-1</span>,color,color)},<span class="hljs-attr">renderPerformance</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">highlight</span>)</span>{<span class="hljs-keyword">var</span> perfval=<span class="hljs-keyword">this</span>.values[<span class="hljs-number">1</span>],perfwidth=<span class="hljs-built_in">Math</span>.round(<span class="hljs-keyword">this</span>.canvasWidth*((perfval-<span class="hljs-keyword">this</span>.min)/<span class="hljs-keyword">this</span>.range)),color=<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"performanceColor"</span>);<span class="hljs-keyword">if</span>(highlight){color=<span class="hljs-keyword">this</span>.calcHighlightColor(color,<span class="hljs-keyword">this</span>.options)}<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.target.drawRect(<span class="hljs-number">0</span>,<span class="hljs-built_in">Math</span>.round(<span class="hljs-keyword">this</span>.canvasHeight*<span class="hljs-number">.3</span>),perfwidth<span class="hljs-number">-1</span>,<span class="hljs-built_in">Math</span>.round(<span class="hljs-keyword">this</span>.canvasHeight*<span class="hljs-number">.4</span>)<span class="hljs-number">-1</span>,color,color)},<span class="hljs-attr">renderTarget</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">highlight</span>)</span>{<span class="hljs-keyword">var</span> targetval=<span class="hljs-keyword">this</span>.values[<span class="hljs-number">0</span>],x=<span class="hljs-built_in">Math</span>.round(<span class="hljs-keyword">this</span>.canvasWidth*((targetval-<span class="hljs-keyword">this</span>.min)/<span class="hljs-keyword">this</span>.range)-<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"targetWidth"</span>)/<span class="hljs-number">2</span>),targettop=<span class="hljs-built_in">Math</span>.round(<span class="hljs-keyword">this</span>.canvasHeight*<span class="hljs-number">.1</span>),targetheight=<span class="hljs-keyword">this</span>.canvasHeight-targettop*<span class="hljs-number">2</span>,color=<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"targetColor"</span>);<span class="hljs-keyword">if</span>(highlight){color=<span class="hljs-keyword">this</span>.calcHighlightColor(color,<span class="hljs-keyword">this</span>.options)}<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.target.drawRect(x,targettop,<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"targetWidth"</span>)<span class="hljs-number">-1</span>,targetheight<span class="hljs-number">-1</span>,color,color)},<span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> vlen=<span class="hljs-keyword">this</span>.values.length,target=<span class="hljs-keyword">this</span>.target,i,shape;<span class="hljs-keyword">if</span>(!bullet._super.render.call(<span class="hljs-keyword">this</span>)){<span class="hljs-keyword">return</span>}<span class="hljs-keyword">for</span>(i=<span class="hljs-number">2</span>;i&lt;vlen;i++){shape=<span class="hljs-keyword">this</span>.renderRange(i).append();<span class="hljs-keyword">this</span>.shapes[shape.id]=<span class="hljs-string">"r"</span>+i;<span class="hljs-keyword">this</span>.valueShapes[<span class="hljs-string">"r"</span>+i]=shape.id}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.values[<span class="hljs-number">1</span>]!==<span class="hljs-literal">null</span>){shape=<span class="hljs-keyword">this</span>.renderPerformance().append();<span class="hljs-keyword">this</span>.shapes[shape.id]=<span class="hljs-string">"p1"</span>;<span class="hljs-keyword">this</span>.valueShapes.p1=shape.id}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.values[<span class="hljs-number">0</span>]!==<span class="hljs-literal">null</span>){shape=<span class="hljs-keyword">this</span>.renderTarget().append();<span class="hljs-keyword">this</span>.shapes[shape.id]=<span class="hljs-string">"t0"</span>;<span class="hljs-keyword">this</span>.valueShapes.t0=shape.id}target.render()}});$.fn.sparkline.pie=pie=createClass($.fn.sparkline._base,{<span class="hljs-attr">type</span>:<span class="hljs-string">"pie"</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,values,options,width,height</span>)</span>{<span class="hljs-keyword">var</span> total=<span class="hljs-number">0</span>,i;pie._super.init.call(<span class="hljs-keyword">this</span>,el,values,options,width,height);<span class="hljs-keyword">this</span>.shapes={};<span class="hljs-keyword">this</span>.valueShapes={};<span class="hljs-keyword">this</span>.values=values=$.map(values,<span class="hljs-built_in">Number</span>);<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"width"</span>)===<span class="hljs-string">"auto"</span>){<span class="hljs-keyword">this</span>.width=<span class="hljs-keyword">this</span>.height}<span class="hljs-keyword">if</span>(values.length&gt;<span class="hljs-number">0</span>){<span class="hljs-keyword">for</span>(i=values.length;i--;){total+=values[i]}}<span class="hljs-keyword">this</span>.total=total;<span class="hljs-keyword">this</span>.initTarget();<span class="hljs-keyword">this</span>.radius=<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.min(<span class="hljs-keyword">this</span>.canvasWidth,<span class="hljs-keyword">this</span>.canvasHeight)/<span class="hljs-number">2</span>)},<span class="hljs-attr">getRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,x,y</span>)</span>{<span class="hljs-keyword">var</span> shapeid=<span class="hljs-keyword">this</span>.target.getShapeAt(el,x,y);<span class="hljs-keyword">return</span> shapeid!==<span class="hljs-literal">undefined</span>&amp;&amp;<span class="hljs-keyword">this</span>.shapes[shapeid]!==<span class="hljs-literal">undefined</span>?<span class="hljs-keyword">this</span>.shapes[shapeid]:<span class="hljs-literal">undefined</span>},<span class="hljs-attr">getCurrentRegionFields</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion;<span class="hljs-keyword">return</span>{<span class="hljs-attr">isNull</span>:<span class="hljs-keyword">this</span>.values[currentRegion]===<span class="hljs-literal">undefined</span>,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.values[currentRegion],<span class="hljs-attr">percent</span>:<span class="hljs-keyword">this</span>.values[currentRegion]/<span class="hljs-keyword">this</span>.total*<span class="hljs-number">100</span>,<span class="hljs-attr">color</span>:<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"sliceColors"</span>)[currentRegion%<span class="hljs-keyword">this</span>.options.get(<span class="hljs-string">"sliceColors"</span>).length],<span class="hljs-attr">offset</span>:currentRegion}},<span class="hljs-attr">changeHighlight</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">highlight</span>)</span>{<span class="hljs-keyword">var</span> currentRegion=<span class="hljs-keyword">this</span>.currentRegion,newslice=<span class="hljs-keyword">this</span>.renderSlice(currentRegion,highlight),shapeid=<span class="hljs-keyword">this</span>.valueShapes[currentRegion];<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.shapes[shapeid];<span class="hljs-keyword">this</span>.target.replaceWithShape(shapeid,newslice);<span class="hljs-keyword">this</span>.valueShapes[currentRegion]=newslice.id;<span class="hljs-keyword">this</span>.shapes[newslice.id]=currentRegion},<span class="hljs-attr">renderSlice</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">valuenum,highlight</span>)</span>{<span class="hljs-keyword">var</span> target=<span class="hljs-keyword">this</span>.target,options=<span class="hljs-keyword">this</span>.options,radius=<span class="hljs-keyword">this</span>.radius,borderWidth=options.get(<span class="hljs-string">"borderWidth"</span>),offset=options.get(<span class="hljs-string">"offset"</span>),circle=<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI,values=<span class="hljs-keyword">this</span>.values,total=<span class="hljs-keyword">this</span>.total,next=offset?<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI*(offset/<span class="hljs-number">360</span>):<span class="hljs-number">0</span>,start,end,i,vlen,color;vlen=values.length;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;vlen;i++){start=next;end=next;<span class="hljs-keyword">if</span>(total&gt;<span class="hljs-number">0</span>){end=next+circle*(values[i]/total)}<span class="hljs-keyword">if</span>(valuenum===i){color=options.get(<span class="hljs-string">"sliceColors"</span>)[i%options.get(<span class="hljs-string">"sliceColors"</span>).length];<span class="hljs-keyword">if</span>(highlight){color=<span class="hljs-keyword">this</span>.calcHighlightColor(color,options)}<span class="hljs-keyword">return</span> target.drawPieSlice(radius,radius,radius-borderWidth,start,end,<span class="hljs-literal">undefined</span>,color)}next=end}},<span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> target=<span class="hljs-keyword">this</span>.target,values=<span class="hljs-keyword">this</span>.values,options=<span class="hljs-keyword">this</span>.options,radius=<span class="hljs-keyword">this</span>.radius,borderWidth=options.get(<span class="hljs-string">"borderWidth"</span>),donutWidth=options.get(<span class="hljs-string">"donutWidth"</span>),shape,i;<span class="hljs-keyword">if</span>(!pie._super.render.call(<span class="hljs-keyword">this</span>)){<span class="hljs-keyword">return</span>}<span class="hljs-keyword">if</span>(borderWidth){target.drawCircle(radius,radius,<span class="hljs-built_in">Math</span>.floor(radius-borderWidth/<span class="hljs-number">2</span>),options.get(<span class="hljs-string">"borderColor"</span>),<span class="hljs-literal">undefined</span>,borderWidth).append()}<span class="hljs-keyword">for</span>(i=values.length;i--;){<span class="hljs-keyword">if</span>(values[i]){shape=<span class="hljs-keyword">this</span>.renderSlice(i).append();<span class="hljs-keyword">this</span>.valueShapes[i]=shape.id;<span class="hljs-keyword">this</span>.shapes[shape.id]=i}}<span class="hljs-keyword">if</span>(donutWidth){target.drawCircle(radius,radius,radius-donutWidth,options.get(<span class="hljs-string">"donutColor"</span>),options.get(<span class="hljs-string">"donutColor"</span>),<span class="hljs-number">0</span>).append()}target.render()}});$.fn.sparkline.box=box=createClass($.fn.sparkline._base,{<span class="hljs-attr">type</span>:<span class="hljs-string">"box"</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,values,options,width,height</span>)</span>{box._super.init.call(<span class="hljs-keyword">this</span>,el,values,options,width,height);<span class="hljs-keyword">this</span>.values=$.map(values,<span class="hljs-built_in">Number</span>);<span class="hljs-keyword">this</span>.width=options.get(<span class="hljs-string">"width"</span>)===<span class="hljs-string">"auto"</span>?<span class="hljs-string">"4.0em"</span>:width;<span class="hljs-keyword">this</span>.initTarget();<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.values.length){<span class="hljs-keyword">this</span>.disabled=<span class="hljs-number">1</span>}},<span class="hljs-attr">getRegion</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>},<span class="hljs-attr">getCurrentRegionFields</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> result=[{<span class="hljs-attr">field</span>:<span class="hljs-string">"lq"</span>,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.quartiles[<span class="hljs-number">0</span>]},{<span class="hljs-attr">field</span>:<span class="hljs-string">"med"</span>,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.quartiles[<span class="hljs-number">1</span>]},{<span class="hljs-attr">field</span>:<span class="hljs-string">"uq"</span>,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.quartiles[<span class="hljs-number">2</span>]}];<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.loutlier!==<span class="hljs-literal">undefined</span>){result.push({<span class="hljs-attr">field</span>:<span class="hljs-string">"lo"</span>,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.loutlier})}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.routlier!==<span class="hljs-literal">undefined</span>){result.push({<span class="hljs-attr">field</span>:<span class="hljs-string">"ro"</span>,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.routlier})}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.lwhisker!==<span class="hljs-literal">undefined</span>){result.push({<span class="hljs-attr">field</span>:<span class="hljs-string">"lw"</span>,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.lwhisker})}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.rwhisker!==<span class="hljs-literal">undefined</span>){result.push({<span class="hljs-attr">field</span>:<span class="hljs-string">"rw"</span>,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.rwhisker})}<span class="hljs-keyword">return</span> result},<span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> target=<span class="hljs-keyword">this</span>.target,values=<span class="hljs-keyword">this</span>.values,vlen=values.length,options=<span class="hljs-keyword">this</span>.options,canvasWidth=<span class="hljs-keyword">this</span>.canvasWidth,canvasHeight=<span class="hljs-keyword">this</span>.canvasHeight,minValue=options.get(<span class="hljs-string">"chartRangeMin"</span>)===<span class="hljs-literal">undefined</span>?<span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>,values):options.get(<span class="hljs-string">"chartRangeMin"</span>),maxValue=options.get(<span class="hljs-string">"chartRangeMax"</span>)===<span class="hljs-literal">undefined</span>?<span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,values):options.get(<span class="hljs-string">"chartRangeMax"</span>),canvasLeft=<span class="hljs-number">0</span>,lwhisker,loutlier,iqr,q1,q2,q3,rwhisker,routlier,i,size,unitSize;<span class="hljs-keyword">if</span>(!box._super.render.call(<span class="hljs-keyword">this</span>)){<span class="hljs-keyword">return</span>}<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"raw"</span>)){<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"showOutliers"</span>)&amp;&amp;values.length&gt;<span class="hljs-number">5</span>){loutlier=values[<span class="hljs-number">0</span>];lwhisker=values[<span class="hljs-number">1</span>];q1=values[<span class="hljs-number">2</span>];q2=values[<span class="hljs-number">3</span>];q3=values[<span class="hljs-number">4</span>];rwhisker=values[<span class="hljs-number">5</span>];routlier=values[<span class="hljs-number">6</span>]}<span class="hljs-keyword">else</span>{lwhisker=values[<span class="hljs-number">0</span>];q1=values[<span class="hljs-number">1</span>];q2=values[<span class="hljs-number">2</span>];q3=values[<span class="hljs-number">3</span>];rwhisker=values[<span class="hljs-number">4</span>]}}<span class="hljs-keyword">else</span>{values.sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,b</span>)</span>{<span class="hljs-keyword">return</span> a-b});q1=quartile(values,<span class="hljs-number">1</span>);q2=quartile(values,<span class="hljs-number">2</span>);q3=quartile(values,<span class="hljs-number">3</span>);iqr=q3-q1;<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"showOutliers"</span>)){lwhisker=rwhisker=<span class="hljs-literal">undefined</span>;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;vlen;i++){<span class="hljs-keyword">if</span>(lwhisker===<span class="hljs-literal">undefined</span>&amp;&amp;values[i]&gt;q1-iqr*options.get(<span class="hljs-string">"outlierIQR"</span>)){lwhisker=values[i]}<span class="hljs-keyword">if</span>(values[i]&lt;q3+iqr*options.get(<span class="hljs-string">"outlierIQR"</span>)){rwhisker=values[i]}}loutlier=values[<span class="hljs-number">0</span>];routlier=values[vlen<span class="hljs-number">-1</span>]}<span class="hljs-keyword">else</span>{lwhisker=values[<span class="hljs-number">0</span>];rwhisker=values[vlen<span class="hljs-number">-1</span>]}}<span class="hljs-keyword">this</span>.quartiles=[q1,q2,q3];<span class="hljs-keyword">this</span>.lwhisker=lwhisker;<span class="hljs-keyword">this</span>.rwhisker=rwhisker;<span class="hljs-keyword">this</span>.loutlier=loutlier;<span class="hljs-keyword">this</span>.routlier=routlier;unitSize=canvasWidth/(maxValue-minValue+<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"showOutliers"</span>)){canvasLeft=<span class="hljs-built_in">Math</span>.ceil(options.get(<span class="hljs-string">"spotRadius"</span>));canvasWidth-=<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.ceil(options.get(<span class="hljs-string">"spotRadius"</span>));unitSize=canvasWidth/(maxValue-minValue+<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(loutlier&lt;lwhisker){target.drawCircle((loutlier-minValue)*unitSize+canvasLeft,canvasHeight/<span class="hljs-number">2</span>,options.get(<span class="hljs-string">"spotRadius"</span>),options.get(<span class="hljs-string">"outlierLineColor"</span>),options.get(<span class="hljs-string">"outlierFillColor"</span>)).append()}<span class="hljs-keyword">if</span>(routlier&gt;rwhisker){target.drawCircle((routlier-minValue)*unitSize+canvasLeft,canvasHeight/<span class="hljs-number">2</span>,options.get(<span class="hljs-string">"spotRadius"</span>),options.get(<span class="hljs-string">"outlierLineColor"</span>),options.get(<span class="hljs-string">"outlierFillColor"</span>)).append()}}target.drawRect(<span class="hljs-built_in">Math</span>.round((q1-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight*<span class="hljs-number">.1</span>),<span class="hljs-built_in">Math</span>.round((q3-q1)*unitSize),<span class="hljs-built_in">Math</span>.round(canvasHeight*<span class="hljs-number">.8</span>),options.get(<span class="hljs-string">"boxLineColor"</span>),options.get(<span class="hljs-string">"boxFillColor"</span>)).append();target.drawLine(<span class="hljs-built_in">Math</span>.round((lwhisker-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">2</span>),<span class="hljs-built_in">Math</span>.round((q1-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">2</span>),options.get(<span class="hljs-string">"lineColor"</span>)).append();target.drawLine(<span class="hljs-built_in">Math</span>.round((lwhisker-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">4</span>),<span class="hljs-built_in">Math</span>.round((lwhisker-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight-canvasHeight/<span class="hljs-number">4</span>),options.get(<span class="hljs-string">"whiskerColor"</span>)).append();target.drawLine(<span class="hljs-built_in">Math</span>.round((rwhisker-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">2</span>),<span class="hljs-built_in">Math</span>.round((q3-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">2</span>),options.get(<span class="hljs-string">"lineColor"</span>)).append();target.drawLine(<span class="hljs-built_in">Math</span>.round((rwhisker-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">4</span>),<span class="hljs-built_in">Math</span>.round((rwhisker-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight-canvasHeight/<span class="hljs-number">4</span>),options.get(<span class="hljs-string">"whiskerColor"</span>)).append();target.drawLine(<span class="hljs-built_in">Math</span>.round((q2-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight*<span class="hljs-number">.1</span>),<span class="hljs-built_in">Math</span>.round((q2-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight*<span class="hljs-number">.9</span>),options.get(<span class="hljs-string">"medianColor"</span>)).append();<span class="hljs-keyword">if</span>(options.get(<span class="hljs-string">"target"</span>)){size=<span class="hljs-built_in">Math</span>.ceil(options.get(<span class="hljs-string">"spotRadius"</span>));target.drawLine(<span class="hljs-built_in">Math</span>.round((options.get(<span class="hljs-string">"target"</span>)-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">2</span>-size),<span class="hljs-built_in">Math</span>.round((options.get(<span class="hljs-string">"target"</span>)-minValue)*unitSize+canvasLeft),<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">2</span>+size),options.get(<span class="hljs-string">"targetColor"</span>)).append();target.drawLine(<span class="hljs-built_in">Math</span>.round((options.get(<span class="hljs-string">"target"</span>)-minValue)*unitSize+canvasLeft-size),<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">2</span>),<span class="hljs-built_in">Math</span>.round((options.get(<span class="hljs-string">"target"</span>)-minValue)*unitSize+canvasLeft+size),<span class="hljs-built_in">Math</span>.round(canvasHeight/<span class="hljs-number">2</span>),options.get(<span class="hljs-string">"targetColor"</span>)).append()}target.render()}});VShape=createClass({<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">target,id,type,args</span>)</span>{<span class="hljs-keyword">this</span>.target=target;<span class="hljs-keyword">this</span>.id=id;<span class="hljs-keyword">this</span>.type=type;<span class="hljs-keyword">this</span>.args=args},<span class="hljs-attr">append</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.target.appendShape(<span class="hljs-keyword">this</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>}});VCanvas_base=createClass({<span class="hljs-attr">_pxregex</span>:<span class="hljs-regexp">/(\d+)(px)?\s*$/i</span>,<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">width,height,target</span>)</span>{<span class="hljs-keyword">if</span>(!width){<span class="hljs-keyword">return</span>}<span class="hljs-keyword">this</span>.width=width;<span class="hljs-keyword">this</span>.height=height;<span class="hljs-keyword">this</span>.target=target;<span class="hljs-keyword">this</span>.lastShapeId=<span class="hljs-literal">null</span>;<span class="hljs-keyword">if</span>(target[<span class="hljs-number">0</span>]){target=target[<span class="hljs-number">0</span>]}$.data(target,<span class="hljs-string">"_jqs_vcanvas"</span>,<span class="hljs-keyword">this</span>)},<span class="hljs-attr">drawLine</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x1,y1,x2,y2,lineColor,lineWidth</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.drawShape([[x1,y1],[x2,y2]],lineColor,lineWidth)},<span class="hljs-attr">drawShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">path,lineColor,fillColor,lineWidth</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._genShape(<span class="hljs-string">"Shape"</span>,[path,lineColor,fillColor,lineWidth])},<span class="hljs-attr">drawCircle</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x,y,radius,lineColor,fillColor,lineWidth</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._genShape(<span class="hljs-string">"Circle"</span>,[x,y,radius,lineColor,fillColor,lineWidth])},<span class="hljs-attr">drawPieSlice</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x,y,radius,startAngle,endAngle,lineColor,fillColor</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._genShape(<span class="hljs-string">"PieSlice"</span>,[x,y,radius,startAngle,endAngle,lineColor,fillColor])},<span class="hljs-attr">drawRect</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x,y,width,height,lineColor,fillColor</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._genShape(<span class="hljs-string">"Rect"</span>,[x,y,width,height,lineColor,fillColor])},<span class="hljs-attr">getElement</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canvas},<span class="hljs-attr">getLastShapeId</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lastShapeId},<span class="hljs-attr">reset</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{alert(<span class="hljs-string">"reset not implemented"</span>)},<span class="hljs-attr">_insert</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,target</span>)</span>{$(target).html(el)},<span class="hljs-attr">_calculatePixelDims</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">width,height,canvas</span>)</span>{<span class="hljs-keyword">var</span> match;match=<span class="hljs-keyword">this</span>._pxregex.exec(height);<span class="hljs-keyword">if</span>(match){<span class="hljs-keyword">this</span>.pixelHeight=match[<span class="hljs-number">1</span>]}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">this</span>.pixelHeight=$(canvas).height()}match=<span class="hljs-keyword">this</span>._pxregex.exec(width);<span class="hljs-keyword">if</span>(match){<span class="hljs-keyword">this</span>.pixelWidth=match[<span class="hljs-number">1</span>]}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">this</span>.pixelWidth=$(canvas).width()}},<span class="hljs-attr">_genShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapetype,shapeargs</span>)</span>{<span class="hljs-keyword">var</span> id=shapeCount++;shapeargs.unshift(id);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VShape(<span class="hljs-keyword">this</span>,id,shapetype,shapeargs)},<span class="hljs-attr">appendShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shape</span>)</span>{alert(<span class="hljs-string">"appendShape not implemented"</span>)},<span class="hljs-attr">replaceWithShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,shape</span>)</span>{alert(<span class="hljs-string">"replaceWithShape not implemented"</span>)},<span class="hljs-attr">insertAfterShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,shape</span>)</span>{alert(<span class="hljs-string">"insertAfterShape not implemented"</span>)},<span class="hljs-attr">removeShapeId</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid</span>)</span>{alert(<span class="hljs-string">"removeShapeId not implemented"</span>)},<span class="hljs-attr">getShapeAt</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,x,y</span>)</span>{alert(<span class="hljs-string">"getShapeAt not implemented"</span>)},<span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{alert(<span class="hljs-string">"render not implemented"</span>)}});VCanvas_canvas=createClass(VCanvas_base,{<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">width,height,target,interact</span>)</span>{VCanvas_canvas._super.init.call(<span class="hljs-keyword">this</span>,width,height,target);<span class="hljs-keyword">this</span>.canvas=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"canvas"</span>);<span class="hljs-keyword">if</span>(target[<span class="hljs-number">0</span>]){target=target[<span class="hljs-number">0</span>]}$.data(target,<span class="hljs-string">"_jqs_vcanvas"</span>,<span class="hljs-keyword">this</span>);$(<span class="hljs-keyword">this</span>.canvas).css({<span class="hljs-attr">display</span>:<span class="hljs-string">"inline-block"</span>,<span class="hljs-attr">width</span>:width,<span class="hljs-attr">height</span>:height,<span class="hljs-attr">verticalAlign</span>:<span class="hljs-string">"top"</span>});<span class="hljs-keyword">this</span>._insert(<span class="hljs-keyword">this</span>.canvas,target);<span class="hljs-keyword">this</span>._calculatePixelDims(width,height,<span class="hljs-keyword">this</span>.canvas);<span class="hljs-keyword">this</span>.canvas.width=<span class="hljs-keyword">this</span>.pixelWidth;<span class="hljs-keyword">this</span>.canvas.height=<span class="hljs-keyword">this</span>.pixelHeight;<span class="hljs-keyword">this</span>.interact=interact;<span class="hljs-keyword">this</span>.shapes={};<span class="hljs-keyword">this</span>.shapeseq=[];<span class="hljs-keyword">this</span>.currentTargetShapeId=<span class="hljs-literal">undefined</span>;$(<span class="hljs-keyword">this</span>.canvas).css({<span class="hljs-attr">width</span>:<span class="hljs-keyword">this</span>.pixelWidth,<span class="hljs-attr">height</span>:<span class="hljs-keyword">this</span>.pixelHeight})},<span class="hljs-attr">_getContext</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">lineColor,fillColor,lineWidth</span>)</span>{<span class="hljs-keyword">var</span> context=<span class="hljs-keyword">this</span>.canvas.getContext(<span class="hljs-string">"2d"</span>);<span class="hljs-keyword">if</span>(lineColor!==<span class="hljs-literal">undefined</span>){context.strokeStyle=lineColor}context.lineWidth=lineWidth===<span class="hljs-literal">undefined</span>?<span class="hljs-number">1</span>:lineWidth;<span class="hljs-keyword">if</span>(fillColor!==<span class="hljs-literal">undefined</span>){context.fillStyle=fillColor}<span class="hljs-keyword">return</span> context},<span class="hljs-attr">reset</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> context=<span class="hljs-keyword">this</span>._getContext();context.clearRect(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.pixelWidth,<span class="hljs-keyword">this</span>.pixelHeight);<span class="hljs-keyword">this</span>.shapes={};<span class="hljs-keyword">this</span>.shapeseq=[];<span class="hljs-keyword">this</span>.currentTargetShapeId=<span class="hljs-literal">undefined</span>},<span class="hljs-attr">_drawShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,path,lineColor,fillColor,lineWidth</span>)</span>{<span class="hljs-keyword">var</span> context=<span class="hljs-keyword">this</span>._getContext(lineColor,fillColor,lineWidth),i,plen;context.beginPath();context.moveTo(path[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]+<span class="hljs-number">.5</span>,path[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]+<span class="hljs-number">.5</span>);<span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>,plen=path.length;i&lt;plen;i++){context.lineTo(path[i][<span class="hljs-number">0</span>]+<span class="hljs-number">.5</span>,path[i][<span class="hljs-number">1</span>]+<span class="hljs-number">.5</span>)}<span class="hljs-keyword">if</span>(lineColor!==<span class="hljs-literal">undefined</span>){context.stroke()}<span class="hljs-keyword">if</span>(fillColor!==<span class="hljs-literal">undefined</span>){context.fill()}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.targetX!==<span class="hljs-literal">undefined</span>&amp;&amp;<span class="hljs-keyword">this</span>.targetY!==<span class="hljs-literal">undefined</span>&amp;&amp;context.isPointInPath(<span class="hljs-keyword">this</span>.targetX,<span class="hljs-keyword">this</span>.targetY)){<span class="hljs-keyword">this</span>.currentTargetShapeId=shapeid}},<span class="hljs-attr">_drawCircle</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,x,y,radius,lineColor,fillColor,lineWidth</span>)</span>{<span class="hljs-keyword">var</span> context=<span class="hljs-keyword">this</span>._getContext(lineColor,fillColor,lineWidth);context.beginPath();context.arc(x,y,radius,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI,<span class="hljs-literal">false</span>);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.targetX!==<span class="hljs-literal">undefined</span>&amp;&amp;<span class="hljs-keyword">this</span>.targetY!==<span class="hljs-literal">undefined</span>&amp;&amp;context.isPointInPath(<span class="hljs-keyword">this</span>.targetX,<span class="hljs-keyword">this</span>.targetY)){<span class="hljs-keyword">this</span>.currentTargetShapeId=shapeid}<span class="hljs-keyword">if</span>(lineColor!==<span class="hljs-literal">undefined</span>){context.stroke()}<span class="hljs-keyword">if</span>(fillColor!==<span class="hljs-literal">undefined</span>){context.fill()}},<span class="hljs-attr">_drawPieSlice</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,x,y,radius,startAngle,endAngle,lineColor,fillColor</span>)</span>{<span class="hljs-keyword">var</span> context=<span class="hljs-keyword">this</span>._getContext(lineColor,fillColor);context.beginPath();context.moveTo(x,y);context.arc(x,y,radius,startAngle,endAngle,<span class="hljs-literal">false</span>);context.lineTo(x,y);context.closePath();<span class="hljs-keyword">if</span>(lineColor!==<span class="hljs-literal">undefined</span>){context.stroke()}<span class="hljs-keyword">if</span>(fillColor){context.fill()}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.targetX!==<span class="hljs-literal">undefined</span>&amp;&amp;<span class="hljs-keyword">this</span>.targetY!==<span class="hljs-literal">undefined</span>&amp;&amp;context.isPointInPath(<span class="hljs-keyword">this</span>.targetX,<span class="hljs-keyword">this</span>.targetY)){<span class="hljs-keyword">this</span>.currentTargetShapeId=shapeid}},<span class="hljs-attr">_drawRect</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,x,y,width,height,lineColor,fillColor</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._drawShape(shapeid,[[x,y],[x+width,y],[x+width,y+height],[x,y+height],[x,y]],lineColor,fillColor)},<span class="hljs-attr">appendShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shape</span>)</span>{<span class="hljs-keyword">this</span>.shapes[shape.id]=shape;<span class="hljs-keyword">this</span>.shapeseq.push(shape.id);<span class="hljs-keyword">this</span>.lastShapeId=shape.id;<span class="hljs-keyword">return</span> shape.id},<span class="hljs-attr">replaceWithShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,shape</span>)</span>{<span class="hljs-keyword">var</span> shapeseq=<span class="hljs-keyword">this</span>.shapeseq,i;<span class="hljs-keyword">this</span>.shapes[shape.id]=shape;<span class="hljs-keyword">for</span>(i=shapeseq.length;i--;){<span class="hljs-keyword">if</span>(shapeseq[i]==shapeid){shapeseq[i]=shape.id}}<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.shapes[shapeid]},<span class="hljs-attr">replaceWithShapes</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeids,shapes</span>)</span>{<span class="hljs-keyword">var</span> shapeseq=<span class="hljs-keyword">this</span>.shapeseq,shapemap={},sid,i,first;<span class="hljs-keyword">for</span>(i=shapeids.length;i--;){shapemap[shapeids[i]]=<span class="hljs-literal">true</span>}<span class="hljs-keyword">for</span>(i=shapeseq.length;i--;){sid=shapeseq[i];<span class="hljs-keyword">if</span>(shapemap[sid]){shapeseq.splice(i,<span class="hljs-number">1</span>);<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.shapes[sid];first=i}}<span class="hljs-keyword">for</span>(i=shapes.length;i--;){shapeseq.splice(first,<span class="hljs-number">0</span>,shapes[i].id);<span class="hljs-keyword">this</span>.shapes[shapes[i].id]=shapes[i]}},<span class="hljs-attr">insertAfterShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,shape</span>)</span>{<span class="hljs-keyword">var</span> shapeseq=<span class="hljs-keyword">this</span>.shapeseq,i;<span class="hljs-keyword">for</span>(i=shapeseq.length;i--;){<span class="hljs-keyword">if</span>(shapeseq[i]===shapeid){shapeseq.splice(i+<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,shape.id);<span class="hljs-keyword">this</span>.shapes[shape.id]=shape;<span class="hljs-keyword">return</span>}}},<span class="hljs-attr">removeShapeId</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid</span>)</span>{<span class="hljs-keyword">var</span> shapeseq=<span class="hljs-keyword">this</span>.shapeseq,i;<span class="hljs-keyword">for</span>(i=shapeseq.length;i--;){<span class="hljs-keyword">if</span>(shapeseq[i]===shapeid){shapeseq.splice(i,<span class="hljs-number">1</span>);<span class="hljs-keyword">break</span>}}<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.shapes[shapeid]},<span class="hljs-attr">getShapeAt</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,x,y</span>)</span>{<span class="hljs-keyword">this</span>.targetX=x;<span class="hljs-keyword">this</span>.targetY=y;<span class="hljs-keyword">this</span>.render();<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentTargetShapeId},<span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> shapeseq=<span class="hljs-keyword">this</span>.shapeseq,shapes=<span class="hljs-keyword">this</span>.shapes,shapeCount=shapeseq.length,context=<span class="hljs-keyword">this</span>._getContext(),shapeid,shape,i;context.clearRect(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.pixelWidth,<span class="hljs-keyword">this</span>.pixelHeight);<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;shapeCount;i++){shapeid=shapeseq[i];shape=shapes[shapeid];<span class="hljs-keyword">this</span>[<span class="hljs-string">"_draw"</span>+shape.type].apply(<span class="hljs-keyword">this</span>,shape.args)}<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.interact){<span class="hljs-keyword">this</span>.shapes={};<span class="hljs-keyword">this</span>.shapeseq=[]}}});VCanvas_vml=createClass(VCanvas_base,{<span class="hljs-attr">init</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">width,height,target</span>)</span>{<span class="hljs-keyword">var</span> groupel;VCanvas_vml._super.init.call(<span class="hljs-keyword">this</span>,width,height,target);<span class="hljs-keyword">if</span>(target[<span class="hljs-number">0</span>]){target=target[<span class="hljs-number">0</span>]}$.data(target,<span class="hljs-string">"_jqs_vcanvas"</span>,<span class="hljs-keyword">this</span>);<span class="hljs-keyword">this</span>.canvas=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"span"</span>);$(<span class="hljs-keyword">this</span>.canvas).css({<span class="hljs-attr">display</span>:<span class="hljs-string">"inline-block"</span>,<span class="hljs-attr">position</span>:<span class="hljs-string">"relative"</span>,<span class="hljs-attr">overflow</span>:<span class="hljs-string">"hidden"</span>,<span class="hljs-attr">width</span>:width,<span class="hljs-attr">height</span>:height,<span class="hljs-attr">margin</span>:<span class="hljs-string">"0px"</span>,<span class="hljs-attr">padding</span>:<span class="hljs-string">"0px"</span>,<span class="hljs-attr">verticalAlign</span>:<span class="hljs-string">"top"</span>});<span class="hljs-keyword">this</span>._insert(<span class="hljs-keyword">this</span>.canvas,target);<span class="hljs-keyword">this</span>._calculatePixelDims(width,height,<span class="hljs-keyword">this</span>.canvas);<span class="hljs-keyword">this</span>.canvas.width=<span class="hljs-keyword">this</span>.pixelWidth;<span class="hljs-keyword">this</span>.canvas.height=<span class="hljs-keyword">this</span>.pixelHeight;groupel=<span class="hljs-string">'&lt;v:group coordorigin="0 0" coordsize="'</span>+<span class="hljs-keyword">this</span>.pixelWidth+<span class="hljs-string">" "</span>+<span class="hljs-keyword">this</span>.pixelHeight+<span class="hljs-string">'"'</span>+<span class="hljs-string">' style="position:absolute;top:0;left:0;width:'</span>+<span class="hljs-keyword">this</span>.pixelWidth+<span class="hljs-string">"px;height="</span>+<span class="hljs-keyword">this</span>.pixelHeight+<span class="hljs-string">'px;"&gt;&lt;/v:group&gt;'</span>;<span class="hljs-keyword">this</span>.canvas.insertAdjacentHTML(<span class="hljs-string">"beforeEnd"</span>,groupel);<span class="hljs-keyword">this</span>.group=$(<span class="hljs-keyword">this</span>.canvas).children()[<span class="hljs-number">0</span>];<span class="hljs-keyword">this</span>.rendered=<span class="hljs-literal">false</span>;<span class="hljs-keyword">this</span>.prerender=<span class="hljs-string">""</span>},<span class="hljs-attr">_drawShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,path,lineColor,fillColor,lineWidth</span>)</span>{<span class="hljs-keyword">var</span> vpath=[],initial,stroke,fill,closed,vel,plen,i;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>,plen=path.length;i&lt;plen;i++){vpath[i]=<span class="hljs-string">""</span>+path[i][<span class="hljs-number">0</span>]+<span class="hljs-string">","</span>+path[i][<span class="hljs-number">1</span>]}initial=vpath.splice(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);lineWidth=lineWidth===<span class="hljs-literal">undefined</span>?<span class="hljs-number">1</span>:lineWidth;stroke=lineColor===<span class="hljs-literal">undefined</span>?<span class="hljs-string">' stroked="false" '</span>:<span class="hljs-string">' strokeWeight="'</span>+lineWidth+<span class="hljs-string">'px" strokeColor="'</span>+lineColor+<span class="hljs-string">'" '</span>;fill=fillColor===<span class="hljs-literal">undefined</span>?<span class="hljs-string">' filled="false"'</span>:<span class="hljs-string">' fillColor="'</span>+fillColor+<span class="hljs-string">'" filled="true" '</span>;closed=vpath[<span class="hljs-number">0</span>]===vpath[vpath.length<span class="hljs-number">-1</span>]?<span class="hljs-string">"x "</span>:<span class="hljs-string">""</span>;vel=<span class="hljs-string">'&lt;v:shape coordorigin="0 0" coordsize="'</span>+<span class="hljs-keyword">this</span>.pixelWidth+<span class="hljs-string">" "</span>+<span class="hljs-keyword">this</span>.pixelHeight+<span class="hljs-string">'" '</span>+<span class="hljs-string">' id="jqsshape'</span>+shapeid+<span class="hljs-string">'" '</span>+stroke+fill+<span class="hljs-string">' style="position:absolute;left:0px;top:0px;height:'</span>+<span class="hljs-keyword">this</span>.pixelHeight+<span class="hljs-string">"px;width:"</span>+<span class="hljs-keyword">this</span>.pixelWidth+<span class="hljs-string">'px;padding:0px;margin:0px;" '</span>+<span class="hljs-string">' path="m '</span>+initial+<span class="hljs-string">" l "</span>+vpath.join(<span class="hljs-string">", "</span>)+<span class="hljs-string">" "</span>+closed+<span class="hljs-string">'e"&gt;'</span>+<span class="hljs-string">" &lt;/v:shape&gt;"</span>;<span class="hljs-keyword">return</span> vel},<span class="hljs-attr">_drawCircle</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,x,y,radius,lineColor,fillColor,lineWidth</span>)</span>{<span class="hljs-keyword">var</span> stroke,fill,vel;x-=radius;y-=radius;stroke=lineColor===<span class="hljs-literal">undefined</span>?<span class="hljs-string">' stroked="false" '</span>:<span class="hljs-string">' strokeWeight="'</span>+lineWidth+<span class="hljs-string">'px" strokeColor="'</span>+lineColor+<span class="hljs-string">'" '</span>;fill=fillColor===<span class="hljs-literal">undefined</span>?<span class="hljs-string">' filled="false"'</span>:<span class="hljs-string">' fillColor="'</span>+fillColor+<span class="hljs-string">'" filled="true" '</span>;vel=<span class="hljs-string">"&lt;v:oval "</span>+<span class="hljs-string">' id="jqsshape'</span>+shapeid+<span class="hljs-string">'" '</span>+stroke+fill+<span class="hljs-string">' style="position:absolute;top:'</span>+y+<span class="hljs-string">"px; left:"</span>+x+<span class="hljs-string">"px; width:"</span>+radius*<span class="hljs-number">2</span>+<span class="hljs-string">"px; height:"</span>+radius*<span class="hljs-number">2</span>+<span class="hljs-string">'px"&gt;&lt;/v:oval&gt;'</span>;<span class="hljs-keyword">return</span> vel},<span class="hljs-attr">_drawPieSlice</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,x,y,radius,startAngle,endAngle,lineColor,fillColor</span>)</span>{<span class="hljs-keyword">var</span> vpath,startx,starty,endx,endy,stroke,fill,vel;<span class="hljs-keyword">if</span>(startAngle===endAngle){<span class="hljs-keyword">return</span><span class="hljs-string">""</span>}<span class="hljs-keyword">if</span>(endAngle-startAngle===<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI){startAngle=<span class="hljs-number">0</span>;endAngle=<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI}startx=x+<span class="hljs-built_in">Math</span>.round(<span class="hljs-built_in">Math</span>.cos(startAngle)*radius);starty=y+<span class="hljs-built_in">Math</span>.round(<span class="hljs-built_in">Math</span>.sin(startAngle)*radius);endx=x+<span class="hljs-built_in">Math</span>.round(<span class="hljs-built_in">Math</span>.cos(endAngle)*radius);endy=y+<span class="hljs-built_in">Math</span>.round(<span class="hljs-built_in">Math</span>.sin(endAngle)*radius);<span class="hljs-keyword">if</span>(startx===endx&amp;&amp;starty===endy){<span class="hljs-keyword">if</span>(endAngle-startAngle&lt;<span class="hljs-built_in">Math</span>.PI){<span class="hljs-keyword">return</span><span class="hljs-string">""</span>}startx=endx=x+radius;starty=endy=y}<span class="hljs-keyword">if</span>(startx===endx&amp;&amp;starty===endy&amp;&amp;endAngle-startAngle&lt;<span class="hljs-built_in">Math</span>.PI){<span class="hljs-keyword">return</span><span class="hljs-string">""</span>}vpath=[x-radius,y-radius,x+radius,y+radius,startx,starty,endx,endy];stroke=lineColor===<span class="hljs-literal">undefined</span>?<span class="hljs-string">' stroked="false" '</span>:<span class="hljs-string">' strokeWeight="1px" strokeColor="'</span>+lineColor+<span class="hljs-string">'" '</span>;fill=fillColor===<span class="hljs-literal">undefined</span>?<span class="hljs-string">' filled="false"'</span>:<span class="hljs-string">' fillColor="'</span>+fillColor+<span class="hljs-string">'" filled="true" '</span>;vel=<span class="hljs-string">'&lt;v:shape coordorigin="0 0" coordsize="'</span>+<span class="hljs-keyword">this</span>.pixelWidth+<span class="hljs-string">" "</span>+<span class="hljs-keyword">this</span>.pixelHeight+<span class="hljs-string">'" '</span>+<span class="hljs-string">' id="jqsshape'</span>+shapeid+<span class="hljs-string">'" '</span>+stroke+fill+<span class="hljs-string">' style="position:absolute;left:0px;top:0px;height:'</span>+<span class="hljs-keyword">this</span>.pixelHeight+<span class="hljs-string">"px;width:"</span>+<span class="hljs-keyword">this</span>.pixelWidth+<span class="hljs-string">'px;padding:0px;margin:0px;" '</span>+<span class="hljs-string">' path="m '</span>+x+<span class="hljs-string">","</span>+y+<span class="hljs-string">" wa "</span>+vpath.join(<span class="hljs-string">", "</span>)+<span class="hljs-string">' x e"&gt;'</span>+<span class="hljs-string">" &lt;/v:shape&gt;"</span>;<span class="hljs-keyword">return</span> vel},<span class="hljs-attr">_drawRect</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,x,y,width,height,lineColor,fillColor</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._drawShape(shapeid,[[x,y],[x,y+height],[x+width,y+height],[x+width,y],[x,y]],lineColor,fillColor)},<span class="hljs-attr">reset</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.group.innerHTML=<span class="hljs-string">""</span>},<span class="hljs-attr">appendShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shape</span>)</span>{<span class="hljs-keyword">var</span> vel=<span class="hljs-keyword">this</span>[<span class="hljs-string">"_draw"</span>+shape.type].apply(<span class="hljs-keyword">this</span>,shape.args);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.rendered){<span class="hljs-keyword">this</span>.group.insertAdjacentHTML(<span class="hljs-string">"beforeEnd"</span>,vel)}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">this</span>.prerender+=vel}<span class="hljs-keyword">this</span>.lastShapeId=shape.id;<span class="hljs-keyword">return</span> shape.id},<span class="hljs-attr">replaceWithShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,shape</span>)</span>{<span class="hljs-keyword">var</span> existing=$(<span class="hljs-string">"#jqsshape"</span>+shapeid),vel=<span class="hljs-keyword">this</span>[<span class="hljs-string">"_draw"</span>+shape.type].apply(<span class="hljs-keyword">this</span>,shape.args);existing[<span class="hljs-number">0</span>].outerHTML=vel},<span class="hljs-attr">replaceWithShapes</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeids,shapes</span>)</span>{<span class="hljs-keyword">var</span> existing=$(<span class="hljs-string">"#jqsshape"</span>+shapeids[<span class="hljs-number">0</span>]),replace=<span class="hljs-string">""</span>,slen=shapes.length,i;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;slen;i++){replace+=<span class="hljs-keyword">this</span>[<span class="hljs-string">"_draw"</span>+shapes[i].type].apply(<span class="hljs-keyword">this</span>,shapes[i].args)}existing[<span class="hljs-number">0</span>].outerHTML=replace;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>;i&lt;shapeids.length;i++){$(<span class="hljs-string">"#jqsshape"</span>+shapeids[i]).remove()}},<span class="hljs-attr">insertAfterShape</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid,shape</span>)</span>{<span class="hljs-keyword">var</span> existing=$(<span class="hljs-string">"#jqsshape"</span>+shapeid),vel=<span class="hljs-keyword">this</span>[<span class="hljs-string">"_draw"</span>+shape.type].apply(<span class="hljs-keyword">this</span>,shape.args);existing[<span class="hljs-number">0</span>].insertAdjacentHTML(<span class="hljs-string">"afterEnd"</span>,vel)},<span class="hljs-attr">removeShapeId</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">shapeid</span>)</span>{<span class="hljs-keyword">var</span> existing=$(<span class="hljs-string">"#jqsshape"</span>+shapeid);<span class="hljs-keyword">this</span>.group.removeChild(existing[<span class="hljs-number">0</span>])},<span class="hljs-attr">getShapeAt</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el,x,y</span>)</span>{<span class="hljs-keyword">var</span> shapeid=el.id.substr(<span class="hljs-number">8</span>);<span class="hljs-keyword">return</span> shapeid},<span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.rendered){<span class="hljs-keyword">this</span>.group.innerHTML=<span class="hljs-keyword">this</span>.prerender;<span class="hljs-keyword">this</span>.rendered=<span class="hljs-literal">true</span>}}})})})(<span class="hljs-built_in">document</span>,<span class="hljs-built_in">Math</span>);

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
